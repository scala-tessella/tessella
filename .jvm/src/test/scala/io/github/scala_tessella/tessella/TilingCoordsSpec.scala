package io.github.scala_tessella.tessella

import Outliers.*
import Geometry.*
import RegularPolygon.{Polygon, Vertex}
import TilingCoordinates.*
import TilingGrowth.*
import TilingGrowth.OtherNodeStrategy.BEFORE_PERIMETER
import Topology.*
import conversion.SVG
import conversion.SVG.*
import utility.Utils.mapKeys

import org.scalatest.*
import org.scalatest.flatspec.*
import org.scalatest.matchers.*

class TilingCoordsSpec extends AnyFlatSpec with Helper with should.Matchers {

  "A square" can "have coords given automatically" in {
    square.coordinates.almostEqualsMap(
      Map(
        1 -> Point(),
        2 -> Point(1, 0),
        3 -> Point(1, 1),
        4 -> Point(0, 1)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  it can "have its coords transformed" in {
    square
      .coordinates
      .affine(
        (Node(1), Node(2), Node(4)),
        (Point(10, 10), Point(10, 9), Point(11, 10))
      )
      .get
      .almostEqualsMap(
        Map(
          1 -> Point(10, 10),
          2 -> Point(10, 9),
          3 -> Point(11, 9),
          4 -> Point(11, 10)
        ).mapKeys(Node(_))
      ) shouldBe
      true
  }
  it can "have its coords transformed with a reflection" in {
    square
      .coordinates
      .affine(
        (Node(1), Node(2), Node(4)),
        (Point(10, 10), Point(10, 9), Point(9, 10))
      )
      .get
      .almostEqualsMap(
        Map(
          1 -> Point(10, 10),
          2 -> Point(10, 9),
          3 -> Point(9, 9),
          4 -> Point(9, 10)
        ).mapKeys(Node(_))
      ) shouldBe
      true
  }

  it can "have different coords based on a starting node" in {
    square.coordinatesFromStartingNode(Node(1), Point(5, 5)).almostEqualsMap(
      Map(
        1 -> Point(5, 5),
        2 -> Point(6, 5),
        3 -> Point(6, 4),
        4 -> Point(5, 4)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  it can "have different coords based on a starting edge" in {
    square.coordinatesFromStartingEdge(1--4, LineSegment(Point(10, 10), Point(11, 10))).almostEqualsMap(
      Map(
        1 -> Point(10, 10),
        2 -> Point(10, 11),
        3 -> Point(11, 11),
        4 -> Point(11, 10)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  "A tiling made of triangles" can "return its coords" in {
    p333333_4by4_reticulate.coords.almostEqualsMap(
      Map(
        1 -> Point(),
        2 -> Point(1, 0),
        3 -> Point(2, 0),
        4 -> Point(-0.5, S6),
        5 -> Point(0.5, S6),
        6 -> Point(1.5, S6),
        7 -> Point(-1, S6 * 2),
        8 -> Point(0, S6 * 2),
        9 -> Point(1, S6 * 2),
        10 -> Point(-1.5, S6 * 3),
        11 -> Point(-0.5, S6 * 3),
        12 -> Point(0.5, S6 * 3),
        13 -> Point(-2, S6 * 4),
        14 -> Point(-1, S6 * 4),
        15 -> Point(0, S6 * 4)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  "A tiling made of hexagons" can "return its coords" in {
    p666_4by4_reticulate.coords.almostEqualsMap(
      Map(
        1 -> Point(),
        2 -> Point(1, 0),
        3 -> Point(1.5, S6),
        4 -> Point(2.5, S6),
        5 -> Point(3, S6 * 2),
        6 -> Point(4, S6 * 2),
        7 -> Point(4.5, S6 * 3),
        8 -> Point(5.5, S6 * 3),
        9 -> Point(6, S6 * 4),
        10 -> Point(-0.5, S6),
        11 -> Point(0, S6 * 2),
        12 -> Point(1, S6 * 2),
        13 -> Point(1.5, S6 * 3),
        14 -> Point(2.5, S6 * 3),
        15 -> Point(3, S6 * 4),
        16 -> Point(4, S6 * 4),
        17 -> Point(4.5, S6 * 5),
        18 -> Point(5.5, S6 * 5),
        19 -> Point(6, S6 * 6),
        20 -> Point(-0.5, S6 * 3),
        21 -> Point(0, S6 * 4),
        22 -> Point(1, S6 * 4),
        23 -> Point(1.5, S6 * 5),
        24 -> Point(2.5, S6 * 5),
        25 -> Point(3, S6 * 6),
        26 -> Point(4, S6 * 6),
        27 -> Point(4.5, S6 * 7),
        28 -> Point(5.5, S6 * 7),
        29 -> Point(6, S6 * 8),
        30 -> Point(-0.5, S6 * 5),
        31 -> Point(0, S6 * 6),
        32 -> Point(1, S6 * 6),
        33 -> Point(1.5, S6 * 7),
        34 -> Point(2.5, S6 * 7),
        35 -> Point(3, S6 * 8),
        36 -> Point(4, S6 * 8),
        37 -> Point(4.5, S6 * 9),
        38 -> Point(5.5, S6 * 9),
        39 -> Point(6, S6 * 10),
        40 -> Point(-0.5, S6 * 7),
        41 -> Point(0, S6 * 8),
        42 -> Point(1, S6 * 8),
        43 -> Point(1.5, S6 * 9),
        44 -> Point(2.5, S6 * 9),
        45 -> Point(3, S6 * 10),
        46 -> Point(4, S6 * 10),
        47 -> Point(4.5, S6 * 11),
        48 -> Point(5.5, S6 * 11)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  it can "be rendered as SVG" in {
    prettyPrinter.format(p666_4by4_reticulate.toSVG()) shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-50.0 -25.0 375.0 526.313972" xmlns="http://www.w3.org/2000/svg">
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="-25.0" y1="43.30127" x2="0.0" y2="86.60254"/>
        |      <line x1="-25.0" y1="129.903811" x2="0.0" y2="173.205081"/>
        |      <line x1="-25.0" y1="216.506351" x2="0.0" y2="259.807621"/>
        |      <line x1="-25.0" y1="303.108891" x2="0.0" y2="346.410162"/>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="0.0" y1="86.60254" x2="50.0" y2="86.60254"/>
        |      <line x1="0.0" y1="173.205081" x2="50.0" y2="173.205081"/>
        |      <line x1="0.0" y1="259.807621" x2="50.0" y2="259.807621"/>
        |      <line x1="0.0" y1="346.410162" x2="50.0" y2="346.410162"/>
        |      <line x1="50.0" y1="0.0" x2="75.0" y2="43.30127"/>
        |      <line x1="50.0" y1="86.60254" x2="75.0" y2="129.903811"/>
        |      <line x1="50.0" y1="173.205081" x2="75.0" y2="216.506351"/>
        |      <line x1="50.0" y1="259.807621" x2="75.0" y2="303.108891"/>
        |      <line x1="50.0" y1="346.410162" x2="75.0" y2="389.711432"/>
        |      <line x1="75.0" y1="43.30127" x2="125.0" y2="43.30127"/>
        |      <line x1="75.0" y1="129.903811" x2="125.0" y2="129.903811"/>
        |      <line x1="75.0" y1="216.506351" x2="125.0" y2="216.506351"/>
        |      <line x1="75.0" y1="303.108891" x2="125.0" y2="303.108891"/>
        |      <line x1="75.0" y1="389.711432" x2="125.0" y2="389.711432"/>
        |      <line x1="125.0" y1="43.30127" x2="150.0" y2="86.60254"/>
        |      <line x1="125.0" y1="129.903811" x2="150.0" y2="173.205081"/>
        |      <line x1="125.0" y1="216.506351" x2="150.0" y2="259.807621"/>
        |      <line x1="125.0" y1="303.108891" x2="150.0" y2="346.410162"/>
        |      <line x1="125.0" y1="389.711432" x2="150.0" y2="433.012702"/>
        |      <line x1="150.0" y1="86.60254" x2="200.0" y2="86.60254"/>
        |      <line x1="150.0" y1="173.205081" x2="200.0" y2="173.205081"/>
        |      <line x1="150.0" y1="259.807621" x2="200.0" y2="259.807621"/>
        |      <line x1="150.0" y1="346.410162" x2="200.0" y2="346.410162"/>
        |      <line x1="150.0" y1="433.012702" x2="200.0" y2="433.012702"/>
        |      <line x1="200.0" y1="86.60254" x2="225.0" y2="129.903811"/>
        |      <line x1="200.0" y1="173.205081" x2="225.0" y2="216.506351"/>
        |      <line x1="200.0" y1="259.807621" x2="225.0" y2="303.108891"/>
        |      <line x1="200.0" y1="346.410162" x2="225.0" y2="389.711432"/>
        |      <line x1="200.0" y1="433.012702" x2="225.0" y2="476.313972"/>
        |      <line x1="225.0" y1="129.903811" x2="275.0" y2="129.903811"/>
        |      <line x1="225.0" y1="216.506351" x2="275.0" y2="216.506351"/>
        |      <line x1="225.0" y1="303.108891" x2="275.0" y2="303.108891"/>
        |      <line x1="225.0" y1="389.711432" x2="275.0" y2="389.711432"/>
        |      <line x1="225.0" y1="476.313972" x2="275.0" y2="476.313972"/>
        |      <line x1="275.0" y1="129.903811" x2="300.0" y2="173.205081"/>
        |      <line x1="275.0" y1="216.506351" x2="300.0" y2="259.807621"/>
        |      <line x1="275.0" y1="303.108891" x2="300.0" y2="346.410162"/>
        |      <line x1="275.0" y1="389.711432" x2="300.0" y2="433.012702"/>
        |      <line x1="0.0" y1="0.0" x2="-25.0" y2="43.30127"/>
        |      <line x1="0.0" y1="86.60254" x2="-25.0" y2="129.903811"/>
        |      <line x1="0.0" y1="173.205081" x2="-25.0" y2="216.506351"/>
        |      <line x1="0.0" y1="259.807621" x2="-25.0" y2="303.108891"/>
        |      <line x1="75.0" y1="43.30127" x2="50.0" y2="86.60254"/>
        |      <line x1="75.0" y1="129.903811" x2="50.0" y2="173.205081"/>
        |      <line x1="75.0" y1="216.506351" x2="50.0" y2="259.807621"/>
        |      <line x1="75.0" y1="303.108891" x2="50.0" y2="346.410162"/>
        |      <line x1="150.0" y1="86.60254" x2="125.0" y2="129.903811"/>
        |      <line x1="150.0" y1="173.205081" x2="125.0" y2="216.506351"/>
        |      <line x1="150.0" y1="259.807621" x2="125.0" y2="303.108891"/>
        |      <line x1="150.0" y1="346.410162" x2="125.0" y2="389.711432"/>
        |      <line x1="225.0" y1="129.903811" x2="200.0" y2="173.205081"/>
        |      <line x1="225.0" y1="216.506351" x2="200.0" y2="259.807621"/>
        |      <line x1="225.0" y1="303.108891" x2="200.0" y2="346.410162"/>
        |      <line x1="225.0" y1="389.711432" x2="200.0" y2="433.012702"/>
        |      <line x1="300.0" y1="173.205081" x2="275.0" y2="216.506351"/>
        |      <line x1="300.0" y1="259.807621" x2="275.0" y2="303.108891"/>
        |      <line x1="300.0" y1="346.410162" x2="275.0" y2="389.711432"/>
        |      <line x1="300.0" y1="433.012702" x2="275.0" y2="476.313972"/>
        |    </g>
        |    <polygon style="fill:none;stroke:blue;stroke-width:2" points="0.0,0.0 -25.0,43.30127 0.0,86.60254 -25.0,129.903811 0.0,173.205081 -25.0,216.506351 0.0,259.807621 -25.0,303.108891 0.0,346.410162 50.0,346.410162 75.0,389.711432 125.0,389.711432 150.0,433.012702 200.0,433.012702 225.0,476.313972 275.0,476.313972 300.0,433.012702 275.0,389.711432 300.0,346.410162 275.0,303.108891 300.0,259.807621 275.0,216.506351 300.0,173.205081 275.0,129.903811 225.0,129.903811 200.0,86.60254 150.0,86.60254 125.0,43.30127 75.0,43.30127 50.0,0.0"/>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Perimeter node labels</title>
        |      <desc>Each perimeter node showing its value</desc>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="-25.0" y="43.30127">10</text>
        |      <text x="0.0" y="86.60254">11</text>
        |      <text x="-25.0" y="129.903811">20</text>
        |      <text x="0.0" y="173.205081">21</text>
        |      <text x="-25.0" y="216.506351">30</text>
        |      <text x="0.0" y="259.807621">31</text>
        |      <text x="-25.0" y="303.108891">40</text>
        |      <text x="0.0" y="346.410162">41</text>
        |      <text x="50.0" y="346.410162">42</text>
        |      <text x="75.0" y="389.711432">43</text>
        |      <text x="125.0" y="389.711432">44</text>
        |      <text x="150.0" y="433.012702">45</text>
        |      <text x="200.0" y="433.012702">46</text>
        |      <text x="225.0" y="476.313972">47</text>
        |      <text x="275.0" y="476.313972">48</text>
        |      <text x="300.0" y="433.012702">39</text>
        |      <text x="275.0" y="389.711432">38</text>
        |      <text x="300.0" y="346.410162">29</text>
        |      <text x="275.0" y="303.108891">28</text>
        |      <text x="300.0" y="259.807621">19</text>
        |      <text x="275.0" y="216.506351">18</text>
        |      <text x="300.0" y="173.205081">9</text>
        |      <text x="275.0" y="129.903811">8</text>
        |      <text x="225.0" y="129.903811">7</text>
        |      <text x="200.0" y="86.60254">6</text>
        |      <text x="150.0" y="86.60254">5</text>
        |      <text x="125.0" y="43.30127">4</text>
        |      <text x="75.0" y="43.30127">3</text>
        |      <text x="50.0" y="0.0">2</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

  "A tiling made of squares" can "return its coords" in {
    p4444_4by4_reticulate.coords.almostEqualsMap(
      Map(
        1 -> Point(),
        2 -> Point(1, 0),
        3 -> Point(2, 0),
        4 -> Point(3, 0),
        5 -> Point(4, 0),
        6 -> Point(0, -1),
        7 -> Point(1, -1),
        8 -> Point(2, -1),
        9 -> Point(3, -1),
        10 -> Point(4, -1),
        11 -> Point(0, -2),
        12 -> Point(1, -2),
        13 -> Point(2, -2),
        14 -> Point(3, -2),
        15 -> Point(4, -2),
        16 -> Point(0, -3),
        17 -> Point(1, -3),
        18 -> Point(2, -3),
        19 -> Point(3, -3),
        20 -> Point(4, -3),
        21 -> Point(0, -4),
        22 -> Point(1, -4),
        23 -> Point(2, -4),
        24 -> Point(3, -4),
        25 -> Point(4, -4)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  it can "be rendered as polygons SVG" in {
    p4444_4by4_reticulate.withPolygons shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-25.0 -225.0 250.0 250.0" xmlns="http://www.w3.org/2000/svg">
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="0.0" y1="-50.0" x2="50.0" y2="-50.0"/>
        |      <line x1="0.0" y1="-100.0" x2="50.0" y2="-100.0"/>
        |      <line x1="0.0" y1="-150.0" x2="50.0" y2="-150.0"/>
        |      <line x1="0.0" y1="-200.0" x2="50.0" y2="-200.0"/>
        |      <line x1="50.0" y1="0.0" x2="100.0" y2="0.0"/>
        |      <line x1="50.0" y1="-50.0" x2="100.0" y2="-50.0"/>
        |      <line x1="50.0" y1="-100.0" x2="100.0" y2="-100.0"/>
        |      <line x1="50.0" y1="-150.0" x2="100.0" y2="-150.0"/>
        |      <line x1="50.0" y1="-200.0" x2="100.0" y2="-200.0"/>
        |      <line x1="100.0" y1="0.0" x2="150.0" y2="0.0"/>
        |      <line x1="100.0" y1="-50.0" x2="150.0" y2="-50.0"/>
        |      <line x1="100.0" y1="-100.0" x2="150.0" y2="-100.0"/>
        |      <line x1="100.0" y1="-150.0" x2="150.0" y2="-150.0"/>
        |      <line x1="100.0" y1="-200.0" x2="150.0" y2="-200.0"/>
        |      <line x1="150.0" y1="0.0" x2="200.0" y2="0.0"/>
        |      <line x1="150.0" y1="-50.0" x2="200.0" y2="-50.0"/>
        |      <line x1="150.0" y1="-100.0" x2="200.0" y2="-100.0"/>
        |      <line x1="150.0" y1="-150.0" x2="200.0" y2="-150.0"/>
        |      <line x1="150.0" y1="-200.0" x2="200.0" y2="-200.0"/>
        |      <line x1="0.0" y1="0.0" x2="0.0" y2="-50.0"/>
        |      <line x1="0.0" y1="-50.0" x2="0.0" y2="-100.0"/>
        |      <line x1="0.0" y1="-100.0" x2="0.0" y2="-150.0"/>
        |      <line x1="0.0" y1="-150.0" x2="0.0" y2="-200.0"/>
        |      <line x1="50.0" y1="0.0" x2="50.0" y2="-50.0"/>
        |      <line x1="50.0" y1="-50.0" x2="50.0" y2="-100.0"/>
        |      <line x1="50.0" y1="-100.0" x2="50.0" y2="-150.0"/>
        |      <line x1="50.0" y1="-150.0" x2="50.0" y2="-200.0"/>
        |      <line x1="100.0" y1="0.0" x2="100.0" y2="-50.0"/>
        |      <line x1="100.0" y1="-50.0" x2="100.0" y2="-100.0"/>
        |      <line x1="100.0" y1="-100.0" x2="100.0" y2="-150.0"/>
        |      <line x1="100.0" y1="-150.0" x2="100.0" y2="-200.0"/>
        |      <line x1="150.0" y1="0.0" x2="150.0" y2="-50.0"/>
        |      <line x1="150.0" y1="-50.0" x2="150.0" y2="-100.0"/>
        |      <line x1="150.0" y1="-100.0" x2="150.0" y2="-150.0"/>
        |      <line x1="150.0" y1="-150.0" x2="150.0" y2="-200.0"/>
        |      <line x1="200.0" y1="0.0" x2="200.0" y2="-50.0"/>
        |      <line x1="200.0" y1="-50.0" x2="200.0" y2="-100.0"/>
        |      <line x1="200.0" y1="-100.0" x2="200.0" y2="-150.0"/>
        |      <line x1="200.0" y1="-150.0" x2="200.0" y2="-200.0"/>
        |    </g>
        |    <g style="stroke:none">
        |      <title>Polygons</title>
        |      <desc>Regular polygons</desc>
        |      <g style="fill:goldenrod">
        |        <title>Regular 4-gons</title>
        |        <desc>Regular polygons with 4 sides</desc>
        |        <polygon points="50.0,-150.0 50.0,-200.0 0.0,-200.0 0.0,-150.0"/>
        |        <polygon points="0.0,-100.0 0.0,-50.0 50.0,-50.0 50.0,-100.0"/>
        |        <polygon points="50.0,-50.0 0.0,-50.0 0.0,0.0 50.0,0.0"/>
        |        <polygon points="100.0,-150.0 100.0,-200.0 50.0,-200.0 50.0,-150.0"/>
        |        <polygon points="50.0,-150.0 0.0,-150.0 0.0,-100.0 50.0,-100.0"/>
        |        <polygon points="100.0,-100.0 50.0,-100.0 50.0,-50.0 100.0,-50.0"/>
        |        <polygon points="100.0,-50.0 50.0,-50.0 50.0,0.0 100.0,0.0"/>
        |        <polygon points="150.0,-150.0 150.0,-200.0 100.0,-200.0 100.0,-150.0"/>
        |        <polygon points="150.0,-150.0 200.0,-150.0 200.0,-200.0 150.0,-200.0"/>
        |        <polygon points="100.0,-100.0 100.0,-150.0 50.0,-150.0 50.0,-100.0"/>
        |        <polygon points="100.0,-100.0 150.0,-100.0 150.0,-150.0 100.0,-150.0"/>
        |        <polygon points="100.0,-100.0 100.0,-50.0 150.0,-50.0 150.0,-100.0"/>
        |        <polygon points="100.0,-50.0 100.0,0.0 150.0,0.0 150.0,-50.0"/>
        |        <polygon points="150.0,-100.0 200.0,-100.0 200.0,-150.0 150.0,-150.0"/>
        |        <polygon points="150.0,-100.0 150.0,-50.0 200.0,-50.0 200.0,-100.0"/>
        |        <polygon points="150.0,0.0 200.0,0.0 200.0,-50.0 150.0,-50.0"/>
        |      </g>
        |    </g>
        |    <polygon style="fill:none;stroke:blue;stroke-width:2" points="0.0,0.0 50.0,0.0 100.0,0.0 150.0,0.0 200.0,0.0 200.0,-50.0 200.0,-100.0 200.0,-150.0 200.0,-200.0 150.0,-200.0 100.0,-200.0 50.0,-200.0 0.0,-200.0 0.0,-150.0 0.0,-100.0 0.0,-50.0"/>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Perimeter node labels</title>
        |      <desc>Each perimeter node showing its value</desc>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="50.0" y="0.0">2</text>
        |      <text x="100.0" y="0.0">3</text>
        |      <text x="150.0" y="0.0">4</text>
        |      <text x="200.0" y="0.0">5</text>
        |      <text x="200.0" y="-50.0">10</text>
        |      <text x="200.0" y="-100.0">15</text>
        |      <text x="200.0" y="-150.0">20</text>
        |      <text x="200.0" y="-200.0">25</text>
        |      <text x="150.0" y="-200.0">24</text>
        |      <text x="100.0" y="-200.0">23</text>
        |      <text x="50.0" y="-200.0">22</text>
        |      <text x="0.0" y="-200.0">21</text>
        |      <text x="0.0" y="-150.0">16</text>
        |      <text x="0.0" y="-100.0">11</text>
        |      <text x="0.0" y="-50.0">6</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

  "A tiling" must "have node 1 at coords (0, 0) and node 2 at coords (1, 0)" in {
    val node2inside: Tiling =
      Tiling.maybe(1--2, 2--3, 3--4, 4--1, 3--5, 5--2, 5--6, 6--2, 6--7, 8--7, 8--2, 8--1).unsafe
    (
      node2inside.coords(Node(1)).almostEquals(Point(), ACCURACY),
      node2inside.coords(Node(2)).almostEquals(Point(1, 0), ACCURACY)
    ) shouldBe
      (true, true)
  }

  val innerTriangle: Tiling =
    Tiling.maybe(
      List(
        1 -- 2, 2 -- 3, 3 -- 1, 2 -- 4, 4 -- 5, 5 -- 6, 6 -- 7, 7 -- 8, 8 -- 9, 9 -- 10, 10 -- 11, 11 -- 12, 12 -- 13, 13 -- 1, 3 -- 14, 14 -- 15,
        15 -- 16, 16 -- 17, 17 -- 18, 18 -- 19, 19 -- 20, 20 -- 21, 21 -- 22, 22 -- 13, 14 -- 23, 23 -- 24, 24 -- 25, 25 -- 26, 26 -- 27,
        27 -- 28, 28 -- 29, 29 -- 30, 30 -- 4
      )
    ).unsafe

  "A (3.12₂) pattern with an inner triangle" can "be made of 4 polygons" in {
    innerTriangle.countPolygons shouldBe
      4
  }

  it can "return its coords" in {
    innerTriangle.coords.almostEqualsMap(
      Map(
        5 -> Point(2.3660254037843274, -1.366025403784312),
        10 -> Point(-0.8660254037844171, -3.2320508075688883),
        14 -> Point(0.5000000000000021, 1.8660254037845023),
        1 -> Point(),
        6 -> Point(2.366025403784398, -2.366025403784312),
        9 -> Point(3.6415315207705135E-14, -3.7320508075688634),
        13 -> Point(-0.8660254037844263, -0.5000000000000214),
        2 -> Point(0.9999999999999648, 3.885780586188048E-16),
        17 -> Point(-1.8660254037844806, 3.2320508075688714),
        12 -> Point(-1.3660254037844277, -1.3660254037844592),
        7 -> Point(1.86602540378445, -3.232050807568781),
        3 -> Point(0.499999999999982, 0.866025403784449),
        18 -> Point(-2.732050807568908, 2.732050807568852),
        16 -> Point(-0.8660254037844808, 3.2320508075688976),
        11 -> Point(-1.3660254037844335, -2.366025403784459),
        8 -> Point(1.000000000000036, -3.7320508075688235),
        4 -> Point(1.8660254037845645, -0.4999999999998812),
        15 -> Point(-2.708944180085382E-14, 2.732050807568924),
        24 -> Point(1.8660254037843864, 3.2320508075689975),
        25 -> Point(2.8660254037843864, 3.232050807569043),
        20 -> Point(-3.232050807568877, 0.8660254037844033),
        29 -> Point(3.732050807568979, 2.0894397323445446E-13),
        28 -> Point(4.232050807568938, 0.8660254037846711),
        21 -> Point(-2.732050807568868, -2.9976021664879227E-14),
        22 -> Point(-1.866025403784426, -0.5000000000000242),
        27 -> Point(4.232050807568891, 1.8660254037846713),
        26 -> Point(3.73205080756885, 2.732050807569087),
        23 -> Point(0.999999999999969, 2.7320508075689602),
        30 -> Point(2.8660254037845645, -0.4999999999998328),
        19 -> Point(-3.232050807568892, 1.8660254037844037)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  it must "have all nodes mapped with coordinates" in {
    innerTriangle.coords.keys.toList.sorted(NodeOrdering) shouldBe
      innerTriangle.graphNodes.sorted(NodeOrdering)
  }

  it can "render nested perimeters" in {
    innerTriangle.nestedPerimetersSVG shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-186.60254 -211.60254 423.205081 398.205081" xmlns="http://www.w3.org/2000/svg">
        |  <g style="stroke:purple;stroke-width:5;fill:none">
        |    <title>Nested</title>
        |    <desc>Nested perimeters</desc>
        |    <g style="fill-opacity:0.5">
        |      <g>
        |        <polygon style="fill:red" points="93.30127,-25.0 143.30127,-25.0 186.60254,0.0 211.60254,43.30127 211.60254,93.30127 186.60254,136.60254 143.30127,161.60254 93.30127,161.60254 50.0,136.60254 25.0,93.30127 0.0,136.60254 -43.30127,161.60254 -93.30127,161.60254 -136.60254,136.60254 -161.60254,93.30127 -161.60254,43.30127 -136.60254,0.0 -93.30127,-25.0 -43.30127,-25.0 -68.30127,-68.30127 -68.30127,-118.30127 -43.30127,-161.60254 0.0,-186.60254 50.0,-186.60254 93.30127,-161.60254 118.30127,-118.30127 118.30127,-68.30127"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.5">
        |      <g>
        |        <polygon style="fill:red" points="0.0,0.0 25.0,43.30127 50.0,0.0"/>
        |      </g>
        |    </g>
        |  </g>
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="50.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="0.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="50.0" y1="0.0" x2="93.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="118.30127" y2="-68.30127"/>
        |      <line x1="118.30127" y1="-68.30127" x2="118.30127" y2="-118.30127"/>
        |      <line x1="118.30127" y1="-118.30127" x2="93.30127" y2="-161.60254"/>
        |      <line x1="93.30127" y1="-161.60254" x2="50.0" y2="-186.60254"/>
        |      <line x1="50.0" y1="-186.60254" x2="0.0" y2="-186.60254"/>
        |      <line x1="0.0" y1="-186.60254" x2="-43.30127" y2="-161.60254"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="-68.30127" y2="-118.30127"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-68.30127" y2="-68.30127"/>
        |      <line x1="-68.30127" y1="-68.30127" x2="-43.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="0.0" x2="-43.30127" y2="-25.0"/>
        |      <line x1="25.0" y1="43.30127" x2="25.0" y2="93.30127"/>
        |      <line x1="25.0" y1="93.30127" x2="0.0" y2="136.60254"/>
        |      <line x1="0.0" y1="136.60254" x2="-43.30127" y2="161.60254"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-93.30127" y2="161.60254"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-136.60254" y2="136.60254"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-161.60254" y2="93.30127"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-161.60254" y2="43.30127"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-136.60254" y2="0.0"/>
        |      <line x1="-136.60254" y1="0.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="-43.30127" y1="-25.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="25.0" y1="93.30127" x2="50.0" y2="136.60254"/>
        |      <line x1="50.0" y1="136.60254" x2="93.30127" y2="161.60254"/>
        |      <line x1="93.30127" y1="161.60254" x2="143.30127" y2="161.60254"/>
        |      <line x1="143.30127" y1="161.60254" x2="186.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="211.60254" y2="93.30127"/>
        |      <line x1="211.60254" y1="93.30127" x2="211.60254" y2="43.30127"/>
        |      <line x1="211.60254" y1="43.30127" x2="186.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="143.30127" y2="-25.0"/>
        |    </g>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Node labels</title>
        |      <desc>Each node showing its value</desc>
        |      <text x="118.30127" y="-68.30127">5</text>
        |      <text x="-43.30127" y="-161.60254">10</text>
        |      <text x="25.0" y="93.30127">14</text>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="118.30127" y="-118.30127">6</text>
        |      <text x="0.0" y="-186.60254">9</text>
        |      <text x="-43.30127" y="-25.0">13</text>
        |      <text x="50.0" y="0.0">2</text>
        |      <text x="-93.30127" y="161.60254">17</text>
        |      <text x="-68.30127" y="-68.30127">12</text>
        |      <text x="93.30127" y="-161.60254">7</text>
        |      <text x="25.0" y="43.30127">3</text>
        |      <text x="-136.60254" y="136.60254">18</text>
        |      <text x="-43.30127" y="161.60254">16</text>
        |      <text x="-68.30127" y="-118.30127">11</text>
        |      <text x="50.0" y="-186.60254">8</text>
        |      <text x="93.30127" y="-25.0">4</text>
        |      <text x="0.0" y="136.60254">15</text>
        |      <text x="93.30127" y="161.60254">24</text>
        |      <text x="143.30127" y="161.60254">25</text>
        |      <text x="-161.60254" y="43.30127">20</text>
        |      <text x="186.60254" y="0.0">29</text>
        |      <text x="211.60254" y="43.30127">28</text>
        |      <text x="-136.60254" y="0.0">21</text>
        |      <text x="-93.30127" y="-25.0">22</text>
        |      <text x="211.60254" y="93.30127">27</text>
        |      <text x="186.60254" y="136.60254">26</text>
        |      <text x="50.0" y="136.60254">23</text>
        |      <text x="143.30127" y="-25.0">30</text>
        |      <text x="-161.60254" y="93.30127">19</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

  val t0: Tiling =
    Tiling.maybe(
      1--2, 2--3, 3--1, 2--4, 4--5, 5--6, 6--7, 7--8, 8--9, 9--10, 10--11, 11--12, 12--13, 13--1, 3--14, 14--15, 15--16,
      16--17, 17--18, 18--19, 19--20, 20--21, 21--22, 22--13, 12--22, 14--23, 23--24, 24--25, 25--26, 26--27, 27--28,
      28--29, 29--30, 30--4, 5--30, 23--15, 6--31, 31--32, 32--33, 33--34, 34--35, 35--36, 36--37, 37--38, 29--38,
      7--31, 38--28, 8--39, 39--40, 40--41, 41--42, 42--43, 43--44, 44--45, 45--46, 32--46, 9--39, 46--33, 10--47,
      47--48, 48--49, 49--50, 50--51, 51--52, 52--53, 53--54, 40--54, 11--47, 54--41, 21--55, 55--56, 56--57, 57--58,
      58--59, 59--60, 48--60, 55--20, 49--60, 16--61, 61--62, 62--63, 63--64, 64--65, 65--66, 66--67, 67--68, 24--68,
      17--61, 68--25, 18--69, 69--70, 70--71, 71--72, 72--73, 73--74, 74--75, 75--76, 62--76, 19--69, 76--63, 56--77,
      77--78, 78--79, 79--80, 80--81, 81--82, 70--82, 77--57, 71--82
    ).unsafe

  "A more complex (3.12₂) pattern" can "be made of 28 polygons" in {
    t0.countPolygons shouldBe
      28
  }

  it can "return its coords" in {
    t0.coords.almostEqualsMap(
      Map(
        69 -> Point(-3.73205080756889, 2.732050807568859),
        5 -> Point(2.3660254037844486, -1.3660254037845214),
        65 -> Point(1.0000000000001594, 6.464101615137745),
        77 -> Point(-5.59807621135344, -0.4999999999999094),
        66 -> Point(1.8660254037845876, 5.964101615137726),
        10 -> Point(-0.8660254037852375, -3.232050807569128),
        56 -> Point(-4.598076211353496, -0.49999999999995937),
        42 -> Point(1.866025403783936, -6.9641016151378965),
        24 -> Point(1.8660254037845507, 3.2320508075688648),
        37 -> Point(5.598076211352484, -0.5000000000000444),
        25 -> Point(2.86602540378453, 3.232050807568828),
        52 -> Point(-1.8660254037849444, -6.96410161513786),
        14 -> Point(0.5000000000000715, 1.8660254037844581),
        20 -> Point(-3.232050807568982, 0.8660254037843965),
        46 -> Point(4.232050807568299, -4.5980762113534155),
        57 -> Point(-5.0980762113535025, -1.366025403784383),
        78 -> Point(-6.464101615137849, 1.4299672557172016E-13),
        29 -> Point(3.7320508075688754, -9.703349235223868E-14),
        61 -> Point(-1.3660254037843143, 4.0980762113533515),
        1 -> Point(),
        74 -> Point(-3.732050807568722, 6.464101615137818),
        6 -> Point(2.366025403784479, -2.366025403784522),
        60 -> Point(-3.732050807569234, -3.7320508075689087),
        70 -> Point(-4.598076211353305, 3.232050807568899),
        21 -> Point(-2.7320508075690237, -8.260059303211165E-14),
        33 -> Point(4.73205080756826, -3.732050807568954),
        28 -> Point(4.232050807567918, 0.8660254037842681),
        38 -> Point(4.732050807568, -1.2256862191861728E-13),
        9 -> Point(-7.245315458703772E-13, -3.732050807568999),
        53 -> Point(-0.8660254037849446, -6.9641016151378805),
        13 -> Point(-0.8660254037844375, -0.5000000000000018),
        41 -> Point(0.9999999999994982, -6.464101615137895),
        73 -> Point(-4.5980762113531695, 5.964101615137833),
        2 -> Point(0.9999999999999998, 2.7755575615628914E-16),
        45 -> Point(4.232050807568339, -5.5980762113534155),
        64 -> Point(1.5987211554602254E-13, 6.464101615137766),
        17 -> Point(-1.8660254037843935, 3.2320508075686445),
        32 -> Point(3.732050807568305, -3.732050807568974),
        34 -> Point(5.598076211352674, -3.2320508075689114),
        22 -> Point(-1.8660254037846147, -0.5000000000001342),
        44 -> Point(3.732050807568365, -6.464101615137869),
        59 -> Point(-4.598076211353643, -3.232050807568857),
        27 -> Point(4.232050807567819, 1.8660254037842683),
        71 -> Point(-5.098076211353213, 4.098076211353406),
        12 -> Point(-1.3660254037846637, -1.366025403784601),
        54 -> Point(-5.013767179207207E-13, -6.46410161513789),
        49 -> Point(-3.2320508075692818, -4.598076211353375),
        81 -> Point(-6.464101615137704, 2.7320508075690233),
        76 -> Point(-1.8660254037842883, 5.964101615137796),
        7 -> Point(1.8660254037838713, -3.2320508075689514),
        39 -> Point(0.49999999999940425, -4.598076211353363),
        3 -> Point(0.5000000000000332, 0.8660254037844584),
        80 -> Point(-6.964101615137746, 1.8660254037846093),
        35 -> Point(6.098076211352622, -2.3660254037844433),
        48 -> Point(-2.732050807569234, -3.732050807568964),
        63 -> Point(-0.8660254037842878, 5.964101615137782),
        18 -> Point(-2.73205080756889, 2.732050807568745),
        50 -> Point(-3.232050807569333, -5.5980762113533755),
        67 -> Point(2.366025403784569, 5.098076211353277),
        16 -> Point(-0.8660254037843267, 3.232050807568905),
        31 -> Point(2.8660254037838713, -3.232050807568965),
        11 -> Point(-1.3660254037847197, -2.3660254037846005),
        72 -> Point(-5.098076211353188, 5.098076211353406),
        43 -> Point(2.866025403783936, -6.964101615137886),
        40 -> Point(0.49999999999937916, -5.598076211353363),
        26 -> Point(3.7320508075677, 2.732050807568638),
        55 -> Point(-3.7320508075690237, -1.7985612998927536E-14),
        23 -> Point(1.0000000000001044, 2.7320508075688776),
        8 -> Point(0.9999999999994238, -3.7320508075689354),
        75 -> Point(-2.7320508075687218, 6.464101615137805),
        58 -> Point(-5.0980762113535825, -2.3660254037843833),
        82 -> Point(-5.598076211353243, 3.2320508075689847),
        36 -> Point(6.098076211352553, -1.366025403784443),
        30 -> Point(2.866025403784419, -0.5000000000000656),
        51 -> Point(-2.7320508075693684, -6.464101615137834),
        19 -> Point(-3.2320508075689327, 1.8660254037843962),
        4 -> Point(1.8660254037844188, -0.5000000000000335),
        79 -> Point(-6.9641016151378, 0.8660254037846098),
        47 -> Point(-1.8660254037847679, -3.2320508075690118),
        15 -> Point(1.0458300891968975E-13, 2.732050807568893),
        68 -> Point(2.3660254037845485, 4.098076211353277),
        62 -> Point(-1.3660254037843, 5.0980762113533515)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  it must "have all nodes mapped with coordinates" in {
    t0.coords.keys.toList.sorted(NodeOrdering) shouldBe
      t0.graphNodes.sorted(NodeOrdering)
  }

  it can "render nested perimeters" in {
    t0.nestedPerimetersSVG shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-373.205081 -373.205081 703.108891 721.410162" xmlns="http://www.w3.org/2000/svg">
        |  <g style="stroke:purple;stroke-width:5;fill:none">
        |    <title>Nested</title>
        |    <desc>Nested perimeters</desc>
        |    <g style="fill-opacity:0.5">
        |      <g>
        |        <polygon style="fill:red" points="143.30127,161.60254 118.30127,204.903811 118.30127,254.903811 93.30127,298.205081 50.0,323.205081 0.0,323.205081 -43.30127,298.205081 -93.30127,298.205081 -136.60254,323.205081 -186.60254,323.205081 -229.903811,298.205081 -254.903811,254.903811 -254.903811,204.903811 -279.903811,161.60254 -323.205081,136.60254 -348.205081,93.30127 -348.205081,43.30127 -323.205081,0.0 -279.903811,-25.0 -254.903811,-68.30127 -254.903811,-118.30127 -229.903811,-161.60254 -186.60254,-186.60254 -161.60254,-229.903811 -161.60254,-279.903811 -136.60254,-323.205081 -93.30127,-348.205081 -43.30127,-348.205081 0.0,-323.205081 50.0,-323.205081 93.30127,-348.205081 143.30127,-348.205081 186.60254,-323.205081 211.60254,-279.903811 211.60254,-229.903811 236.60254,-186.60254 279.903811,-161.60254 304.903811,-118.30127 304.903811,-68.30127 279.903811,-25.0 236.60254,0.0 211.60254,43.30127 211.60254,93.30127 186.60254,136.60254"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.5">
        |      <g>
        |        <polygon style="fill:red" points="118.30127,-68.30127 143.30127,-25.0 93.30127,-25.0 50.0,0.0 25.0,43.30127 25.0,93.30127 50.0,136.60254 0.0,136.60254 -43.30127,161.60254 -68.30127,204.903811 -93.30127,161.60254 -136.60254,136.60254 -186.60254,136.60254 -161.60254,93.30127 -161.60254,43.30127 -186.60254,0.0 -136.60254,0.0 -93.30127,-25.0 -68.30127,-68.30127 -68.30127,-118.30127 -93.30127,-161.60254 -43.30127,-161.60254 0.0,-186.60254 25.0,-229.903811 50.0,-186.60254 93.30127,-161.60254 143.30127,-161.60254 118.30127,-118.30127"/>
        |      </g>
        |    </g>
        |  </g>
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="50.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="0.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="50.0" y1="0.0" x2="93.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="118.30127" y2="-68.30127"/>
        |      <line x1="118.30127" y1="-68.30127" x2="118.30127" y2="-118.30127"/>
        |      <line x1="118.30127" y1="-118.30127" x2="93.30127" y2="-161.60254"/>
        |      <line x1="93.30127" y1="-161.60254" x2="50.0" y2="-186.60254"/>
        |      <line x1="50.0" y1="-186.60254" x2="0.0" y2="-186.60254"/>
        |      <line x1="0.0" y1="-186.60254" x2="-43.30127" y2="-161.60254"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="-68.30127" y2="-118.30127"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-68.30127" y2="-68.30127"/>
        |      <line x1="-68.30127" y1="-68.30127" x2="-43.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="0.0" x2="-43.30127" y2="-25.0"/>
        |      <line x1="25.0" y1="43.30127" x2="25.0" y2="93.30127"/>
        |      <line x1="25.0" y1="93.30127" x2="0.0" y2="136.60254"/>
        |      <line x1="0.0" y1="136.60254" x2="-43.30127" y2="161.60254"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-93.30127" y2="161.60254"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-136.60254" y2="136.60254"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-161.60254" y2="93.30127"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-161.60254" y2="43.30127"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-136.60254" y2="0.0"/>
        |      <line x1="-136.60254" y1="0.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="-43.30127" y1="-25.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="-68.30127" y1="-68.30127" x2="-93.30127" y2="-25.0"/>
        |      <line x1="25.0" y1="93.30127" x2="50.0" y2="136.60254"/>
        |      <line x1="50.0" y1="136.60254" x2="93.30127" y2="161.60254"/>
        |      <line x1="93.30127" y1="161.60254" x2="143.30127" y2="161.60254"/>
        |      <line x1="143.30127" y1="161.60254" x2="186.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="211.60254" y2="93.30127"/>
        |      <line x1="211.60254" y1="93.30127" x2="211.60254" y2="43.30127"/>
        |      <line x1="211.60254" y1="43.30127" x2="186.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="118.30127" y1="-68.30127" x2="143.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="136.60254" x2="50.0" y2="136.60254"/>
        |      <line x1="118.30127" y1="-118.30127" x2="143.30127" y2="-161.60254"/>
        |      <line x1="143.30127" y1="-161.60254" x2="186.60254" y2="-186.60254"/>
        |      <line x1="186.60254" y1="-186.60254" x2="236.60254" y2="-186.60254"/>
        |      <line x1="236.60254" y1="-186.60254" x2="279.903811" y2="-161.60254"/>
        |      <line x1="279.903811" y1="-161.60254" x2="304.903811" y2="-118.30127"/>
        |      <line x1="304.903811" y1="-118.30127" x2="304.903811" y2="-68.30127"/>
        |      <line x1="304.903811" y1="-68.30127" x2="279.903811" y2="-25.0"/>
        |      <line x1="279.903811" y1="-25.0" x2="236.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="236.60254" y2="0.0"/>
        |      <line x1="93.30127" y1="-161.60254" x2="143.30127" y2="-161.60254"/>
        |      <line x1="211.60254" y1="43.30127" x2="236.60254" y2="0.0"/>
        |      <line x1="50.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="25.0" y1="-229.903811" x2="25.0" y2="-279.903811"/>
        |      <line x1="25.0" y1="-279.903811" x2="50.0" y2="-323.205081"/>
        |      <line x1="50.0" y1="-323.205081" x2="93.30127" y2="-348.205081"/>
        |      <line x1="93.30127" y1="-348.205081" x2="143.30127" y2="-348.205081"/>
        |      <line x1="143.30127" y1="-348.205081" x2="186.60254" y2="-323.205081"/>
        |      <line x1="186.60254" y1="-323.205081" x2="211.60254" y2="-279.903811"/>
        |      <line x1="211.60254" y1="-279.903811" x2="211.60254" y2="-229.903811"/>
        |      <line x1="186.60254" y1="-186.60254" x2="211.60254" y2="-229.903811"/>
        |      <line x1="0.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="236.60254" y1="-186.60254" x2="211.60254" y2="-229.903811"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="-93.30127" y1="-161.60254" x2="-136.60254" y2="-186.60254"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-161.60254" y2="-229.903811"/>
        |      <line x1="-161.60254" y1="-229.903811" x2="-161.60254" y2="-279.903811"/>
        |      <line x1="-161.60254" y1="-279.903811" x2="-136.60254" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="-323.205081" x2="-93.30127" y2="-348.205081"/>
        |      <line x1="-93.30127" y1="-348.205081" x2="-43.30127" y2="-348.205081"/>
        |      <line x1="-43.30127" y1="-348.205081" x2="0.0" y2="-323.205081"/>
        |      <line x1="25.0" y1="-279.903811" x2="0.0" y2="-323.205081"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="50.0" y1="-323.205081" x2="0.0" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="0.0" x2="-186.60254" y2="0.0"/>
        |      <line x1="-186.60254" y1="0.0" x2="-229.903811" y2="-25.0"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-254.903811" y1="-68.30127" x2="-254.903811" y2="-118.30127"/>
        |      <line x1="-254.903811" y1="-118.30127" x2="-229.903811" y2="-161.60254"/>
        |      <line x1="-229.903811" y1="-161.60254" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-186.60254" y2="0.0"/>
        |      <line x1="-161.60254" y1="-229.903811" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="-68.30127" y1="204.903811" x2="-68.30127" y2="254.903811"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-43.30127" y2="298.205081"/>
        |      <line x1="-43.30127" y1="298.205081" x2="0.0" y2="323.205081"/>
        |      <line x1="0.0" y1="323.205081" x2="50.0" y2="323.205081"/>
        |      <line x1="50.0" y1="323.205081" x2="93.30127" y2="298.205081"/>
        |      <line x1="93.30127" y1="298.205081" x2="118.30127" y2="254.903811"/>
        |      <line x1="118.30127" y1="254.903811" x2="118.30127" y2="204.903811"/>
        |      <line x1="93.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="143.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-186.60254" y1="136.60254" x2="-229.903811" y2="161.60254"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-254.903811" y2="204.903811"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-254.903811" y2="254.903811"/>
        |      <line x1="-254.903811" y1="254.903811" x2="-229.903811" y2="298.205081"/>
        |      <line x1="-229.903811" y1="298.205081" x2="-186.60254" y2="323.205081"/>
        |      <line x1="-186.60254" y1="323.205081" x2="-136.60254" y2="323.205081"/>
        |      <line x1="-136.60254" y1="323.205081" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-43.30127" y1="298.205081" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-279.903811" y2="-25.0"/>
        |      <line x1="-279.903811" y1="-25.0" x2="-323.205081" y2="0.0"/>
        |      <line x1="-323.205081" y1="0.0" x2="-348.205081" y2="43.30127"/>
        |      <line x1="-348.205081" y1="43.30127" x2="-348.205081" y2="93.30127"/>
        |      <line x1="-348.205081" y1="93.30127" x2="-323.205081" y2="136.60254"/>
        |      <line x1="-323.205081" y1="136.60254" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-254.903811" y1="-68.30127" x2="-279.903811" y2="-25.0"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-279.903811" y2="161.60254"/>
        |    </g>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Node labels</title>
        |      <desc>Each node showing its value</desc>
        |      <text x="-186.60254" y="136.60254">69</text>
        |      <text x="118.30127" y="-68.30127">5</text>
        |      <text x="50.0" y="323.205081">65</text>
        |      <text x="-279.903811" y="-25.0">77</text>
        |      <text x="93.30127" y="298.205081">66</text>
        |      <text x="-43.30127" y="-161.60254">10</text>
        |      <text x="-229.903811" y="-25.0">56</text>
        |      <text x="93.30127" y="-348.205081">42</text>
        |      <text x="93.30127" y="161.60254">24</text>
        |      <text x="279.903811" y="-25.0">37</text>
        |      <text x="143.30127" y="161.60254">25</text>
        |      <text x="-93.30127" y="-348.205081">52</text>
        |      <text x="25.0" y="93.30127">14</text>
        |      <text x="-161.60254" y="43.30127">20</text>
        |      <text x="211.60254" y="-229.903811">46</text>
        |      <text x="-254.903811" y="-68.30127">57</text>
        |      <text x="-323.205081" y="0.0">78</text>
        |      <text x="186.60254" y="0.0">29</text>
        |      <text x="-68.30127" y="204.903811">61</text>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="-186.60254" y="323.205081">74</text>
        |      <text x="118.30127" y="-118.30127">6</text>
        |      <text x="-186.60254" y="-186.60254">60</text>
        |      <text x="-229.903811" y="161.60254">70</text>
        |      <text x="-136.60254" y="0.0">21</text>
        |      <text x="236.60254" y="-186.60254">33</text>
        |      <text x="211.60254" y="43.30127">28</text>
        |      <text x="236.60254" y="0.0">38</text>
        |      <text x="0.0" y="-186.60254">9</text>
        |      <text x="-43.30127" y="-348.205081">53</text>
        |      <text x="-43.30127" y="-25.0">13</text>
        |      <text x="50.0" y="-323.205081">41</text>
        |      <text x="-229.903811" y="298.205081">73</text>
        |      <text x="50.0" y="0.0">2</text>
        |      <text x="211.60254" y="-279.903811">45</text>
        |      <text x="0.0" y="323.205081">64</text>
        |      <text x="-93.30127" y="161.60254">17</text>
        |      <text x="186.60254" y="-186.60254">32</text>
        |      <text x="279.903811" y="-161.60254">34</text>
        |      <text x="-93.30127" y="-25.0">22</text>
        |      <text x="186.60254" y="-323.205081">44</text>
        |      <text x="-229.903811" y="-161.60254">59</text>
        |      <text x="211.60254" y="93.30127">27</text>
        |      <text x="-254.903811" y="204.903811">71</text>
        |      <text x="-68.30127" y="-68.30127">12</text>
        |      <text x="0.0" y="-323.205081">54</text>
        |      <text x="-161.60254" y="-229.903811">49</text>
        |      <text x="-323.205081" y="136.60254">81</text>
        |      <text x="-93.30127" y="298.205081">76</text>
        |      <text x="93.30127" y="-161.60254">7</text>
        |      <text x="25.0" y="-229.903811">39</text>
        |      <text x="25.0" y="43.30127">3</text>
        |      <text x="-348.205081" y="93.30127">80</text>
        |      <text x="304.903811" y="-118.30127">35</text>
        |      <text x="-136.60254" y="-186.60254">48</text>
        |      <text x="-43.30127" y="298.205081">63</text>
        |      <text x="-136.60254" y="136.60254">18</text>
        |      <text x="-161.60254" y="-279.903811">50</text>
        |      <text x="118.30127" y="254.903811">67</text>
        |      <text x="-43.30127" y="161.60254">16</text>
        |      <text x="143.30127" y="-161.60254">31</text>
        |      <text x="-68.30127" y="-118.30127">11</text>
        |      <text x="-254.903811" y="254.903811">72</text>
        |      <text x="143.30127" y="-348.205081">43</text>
        |      <text x="25.0" y="-279.903811">40</text>
        |      <text x="186.60254" y="136.60254">26</text>
        |      <text x="-186.60254" y="0.0">55</text>
        |      <text x="50.0" y="136.60254">23</text>
        |      <text x="50.0" y="-186.60254">8</text>
        |      <text x="-136.60254" y="323.205081">75</text>
        |      <text x="-254.903811" y="-118.30127">58</text>
        |      <text x="-279.903811" y="161.60254">82</text>
        |      <text x="304.903811" y="-68.30127">36</text>
        |      <text x="143.30127" y="-25.0">30</text>
        |      <text x="-136.60254" y="-323.205081">51</text>
        |      <text x="-161.60254" y="93.30127">19</text>
        |      <text x="93.30127" y="-25.0">4</text>
        |      <text x="-348.205081" y="43.30127">79</text>
        |      <text x="-93.30127" y="-161.60254">47</text>
        |      <text x="0.0" y="136.60254">15</text>
        |      <text x="118.30127" y="204.903811">68</text>
        |      <text x="-68.30127" y="254.903811">62</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

  val t1: Tiling =
    t0.maybeGrowNode(Node(25), Vertex(Polygon(12)), BEFORE_PERIMETER).unsafe

  "A grown (3.12₂) pattern" can "be made of 29 polygons" in {
    t1.countPolygons shouldBe
      29
  }

  it can "return its coords" in {
    t1.coords.almostEqualsMap(
      Map(
        5 -> Point(2.3660254037844393, -1.3660254037844384),
        84 -> Point(3.7320508075688505, 6.4641016151377775),
        65 -> Point(0.99999999999996, 6.464101615137779),
        77 -> Point(-5.598076211353314, -0.5000000000000385),
        66 -> Point(1.8660254037844044, 5.964101615137789),
        87 -> Point(6.0980762113533, 5.098076211353357),
        69 -> Point(-3.7320508075688865, 2.7320508075688674),
        88 -> Point(6.098076211353309, 4.098076211353357),
        10 -> Point(-0.8660254037844379, -3.232050807568881),
        56 -> Point(-4.598076211353314, -0.5000000000000264),
        42 -> Point(1.8660254037844748, -6.964101615137747),
        24 -> Point(1.866025403784429, 3.232050807568889),
        37 -> Point(5.598076211353325, -0.4999999999999724),
        25 -> Point(2.866025403784429, 3.232050807568893),
        52 -> Point(-1.8660254037844037, -6.964101615137769),
        14 -> Point(0.4999999999999941, 1.8660254037844464),
        20 -> Point(-3.2320508075688856, 0.8660254037844389),
        46 -> Point(4.232050807568903, -4.5980762113532965),
        57 -> Point(-5.098076211353311, -1.3660254037844672),
        78 -> Point(-6.464101615137759, -4.957145804951324E-14),
        29 -> Point(3.7320508075688847, 1.9206858326015208E-14),
        61 -> Point(-1.366025403784456, 4.098076211353316),
        89 -> Point(5.598076211353318, 3.232050807568913),
        1 -> Point(0.0, -0.0),
        74 -> Point(-3.732050807568933, 6.464101615137748),
        6 -> Point(2.3660254037844397, -2.3660254037844384),
        60 -> Point(-3.7320508075688648, -3.7320508075689025),
        85 -> Point(4.73205080756885, 6.464101615137785),
        70 -> Point(-4.59807621135333, 3.232050807568858),
        21 -> Point(-2.732050807568886, 1.1102230246251565E-16),
        33 -> Point(4.732050807568898, -3.732050807568855),
        28 -> Point(4.232050807568879, 0.866025403784461),
        38 -> Point(4.732050807568885, 2.531308496145357E-14),
        9 -> Point(1.7763568394002505E-15, -3.7320508075688794),
        53 -> Point(-0.8660254037844036, -6.964101615137763),
        13 -> Point(-0.8660254037844481, -0.5000000000000033),
        41 -> Point(1.0000000000000329, -6.464101615137753),
        73 -> Point(-4.598076211353365, 5.964101615137737),
        2 -> Point(1.0, -0.0),
        45 -> Point(4.232050807568907, -5.5980762113532965),
        64 -> Point(-3.9968028886505635E-14, 6.464101615137769),
        17 -> Point(-1.8660254037844486, 3.232050807568879),
        32 -> Point(3.732050807568898, -3.7320508075688608),
        34 -> Point(5.598076211353335, -3.2320508075688505),
        22 -> Point(-1.8660254037844481, -0.5000000000000012),
        44 -> Point(3.732050807568911, -6.4641016151377375),
        59 -> Point(-4.5980762113533045, -3.2320508075689043),
        27 -> Point(4.232050807568874, 1.866025403784461),
        71 -> Point(-5.098076211353341, 4.098076211353291),
        12 -> Point(-1.3660254037844444, -1.3660254037844441),
        54 -> Point(3.2862601528904634E-14, -6.46410161513776),
        49 -> Point(-3.232050807568858, -4.598076211353337),
        86 -> Point(5.598076211353293, 5.964101615137792),
        81 -> Point(-6.464101615137799, 2.7320508075688283),
        76 -> Point(-1.866025403784473, 5.96410161513775),
        7 -> Point(1.86602540378444, -3.232050807568877),
        39 -> Point(0.5000000000000193, -4.598076211353318),
        3 -> Point(0.499999999999998, 0.8660254037844464),
        80 -> Point(-6.9641016151377855, 1.8660254037843822),
        35 -> Point(6.098076211353331, -2.3660254037844095),
        48 -> Point(-2.7320508075688648, -3.7320508075688945),
        63 -> Point(-0.8660254037844735, 5.96410161513776),
        18 -> Point(-2.7320508075688865, 2.7320508075688776),
        50 -> Point(-3.232050807568851, -5.598076211353337),
        67 -> Point(2.3660254037844206, 5.098076211353329),
        16 -> Point(-0.8660254037844486, 3.232050807568881),
        31 -> Point(2.866025403784456, -3.232050807568866),
        11 -> Point(-1.3660254037844406, -2.366025403784444),
        72 -> Point(-5.098076211353353, 5.098076211353291),
        43 -> Point(2.866025403784475, -6.964101615137742),
        40 -> Point(0.5000000000000269, -5.598076211353318),
        26 -> Point(3.7320508075688696, 2.732050807568897),
        55 -> Point(-3.732050807568878, -2.2093438190040615E-14),
        23 -> Point(0.9999999999999919, 2.7320508075688865),
        8 -> Point(1.0000000000000018, -3.732050807568878),
        75 -> Point(-2.732050807568933, 6.464101615137762),
        58 -> Point(-5.098076211353307, -2.3660254037844672),
        82 -> Point(-5.59807621135333, 3.2320508075688466),
        36 -> Point(6.098076211353328, -1.3660254037844095),
        30 -> Point(2.8660254037844495, -0.4999999999999868),
        51 -> Point(-2.732050807568845, -6.464101615137773),
        19 -> Point(-3.2320508075688856, 1.8660254037844388),
        4 -> Point(1.8660254037844388, -0.49999999999999983),
        79 -> Point(-6.964101615137771, 0.8660254037843822),
        47 -> Point(-1.8660254037844304, -3.2320508075688874),
        15 -> Point(-8.659739592076221E-15, 2.7320508075688834),
        68 -> Point(2.366025403784426, 4.098076211353329),
        62 -> Point(-1.366025403784465, 5.098076211353316),
        90 -> Point(4.732050807568884, 2.7320508075689043),
        83 -> Point(2.8660254037844153, 5.964101615137771)
      ).mapKeys(Node(_))
    ) shouldBe
      true
  }

  it must "have all nodes mapped with coordinates" in {
    t1.coords.keys.toList.sorted(NodeOrdering) shouldBe
      t1.graphNodes.sorted(NodeOrdering)
  }

  it can "render nested perimeters" in {
    t1.nestedPerimetersSVG shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-373.205081 -373.205081 703.108891 721.410162" xmlns="http://www.w3.org/2000/svg">
        |  <g style="stroke:purple;stroke-width:5;fill:none">
        |    <title>Nested</title>
        |    <desc>Nested perimeters</desc>
        |    <g style="fill-opacity:0.5">
        |      <g>
        |        <polygon style="fill:red" points="186.60254,136.60254 211.60254,93.30127 211.60254,43.30127 236.60254,0.0 279.903811,-25.0 304.903811,-68.30127 304.903811,-118.30127 279.903811,-161.60254 236.60254,-186.60254 211.60254,-229.903811 211.60254,-279.903811 186.60254,-323.205081 143.30127,-348.205081 93.30127,-348.205081 50.0,-323.205081 0.0,-323.205081 -43.30127,-348.205081 -93.30127,-348.205081 -136.60254,-323.205081 -161.60254,-279.903811 -161.60254,-229.903811 -186.60254,-186.60254 -229.903811,-161.60254 -254.903811,-118.30127 -254.903811,-68.30127 -279.903811,-25.0 -323.205081,0.0 -348.205081,43.30127 -348.205081,93.30127 -323.205081,136.60254 -279.903811,161.60254 -254.903811,204.903811 -254.903811,254.903811 -229.903811,298.205081 -186.60254,323.205081 -136.60254,323.205081 -93.30127,298.205081 -43.30127,298.205081 0.0,323.205081 50.0,323.205081 93.30127,298.205081 118.30127,254.903811 143.30127,298.205081 186.60254,323.205081 236.60254,323.205081 279.903811,298.205081 304.903811,254.903811 304.903811,204.903811 279.903811,161.60254 236.60254,136.60254"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.5">
        |      <g>
        |        <polygon style="fill:red" points="93.30127,161.60254 143.30127,161.60254 118.30127,204.903811"/>
        |        <polygon style="fill:red" points="118.30127,-68.30127 143.30127,-25.0 93.30127,-25.0 50.0,0.0 25.0,43.30127 25.0,93.30127 50.0,136.60254 0.0,136.60254 -43.30127,161.60254 -68.30127,204.903811 -93.30127,161.60254 -136.60254,136.60254 -186.60254,136.60254 -161.60254,93.30127 -161.60254,43.30127 -186.60254,0.0 -136.60254,0.0 -93.30127,-25.0 -68.30127,-68.30127 -68.30127,-118.30127 -93.30127,-161.60254 -43.30127,-161.60254 0.0,-186.60254 25.0,-229.903811 50.0,-186.60254 93.30127,-161.60254 143.30127,-161.60254 118.30127,-118.30127"/>
        |      </g>
        |    </g>
        |  </g>
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="50.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="0.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="50.0" y1="0.0" x2="93.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="118.30127" y2="-68.30127"/>
        |      <line x1="118.30127" y1="-68.30127" x2="118.30127" y2="-118.30127"/>
        |      <line x1="118.30127" y1="-118.30127" x2="93.30127" y2="-161.60254"/>
        |      <line x1="93.30127" y1="-161.60254" x2="50.0" y2="-186.60254"/>
        |      <line x1="50.0" y1="-186.60254" x2="0.0" y2="-186.60254"/>
        |      <line x1="0.0" y1="-186.60254" x2="-43.30127" y2="-161.60254"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="-68.30127" y2="-118.30127"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-68.30127" y2="-68.30127"/>
        |      <line x1="-68.30127" y1="-68.30127" x2="-43.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="0.0" x2="-43.30127" y2="-25.0"/>
        |      <line x1="25.0" y1="43.30127" x2="25.0" y2="93.30127"/>
        |      <line x1="25.0" y1="93.30127" x2="0.0" y2="136.60254"/>
        |      <line x1="0.0" y1="136.60254" x2="-43.30127" y2="161.60254"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-93.30127" y2="161.60254"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-136.60254" y2="136.60254"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-161.60254" y2="93.30127"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-161.60254" y2="43.30127"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-136.60254" y2="0.0"/>
        |      <line x1="-136.60254" y1="0.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="-43.30127" y1="-25.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="-68.30127" y1="-68.30127" x2="-93.30127" y2="-25.0"/>
        |      <line x1="25.0" y1="93.30127" x2="50.0" y2="136.60254"/>
        |      <line x1="50.0" y1="136.60254" x2="93.30127" y2="161.60254"/>
        |      <line x1="93.30127" y1="161.60254" x2="143.30127" y2="161.60254"/>
        |      <line x1="143.30127" y1="161.60254" x2="186.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="211.60254" y2="93.30127"/>
        |      <line x1="211.60254" y1="93.30127" x2="211.60254" y2="43.30127"/>
        |      <line x1="211.60254" y1="43.30127" x2="186.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="118.30127" y1="-68.30127" x2="143.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="136.60254" x2="50.0" y2="136.60254"/>
        |      <line x1="118.30127" y1="-118.30127" x2="143.30127" y2="-161.60254"/>
        |      <line x1="143.30127" y1="-161.60254" x2="186.60254" y2="-186.60254"/>
        |      <line x1="186.60254" y1="-186.60254" x2="236.60254" y2="-186.60254"/>
        |      <line x1="236.60254" y1="-186.60254" x2="279.903811" y2="-161.60254"/>
        |      <line x1="279.903811" y1="-161.60254" x2="304.903811" y2="-118.30127"/>
        |      <line x1="304.903811" y1="-118.30127" x2="304.903811" y2="-68.30127"/>
        |      <line x1="304.903811" y1="-68.30127" x2="279.903811" y2="-25.0"/>
        |      <line x1="279.903811" y1="-25.0" x2="236.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="236.60254" y2="0.0"/>
        |      <line x1="93.30127" y1="-161.60254" x2="143.30127" y2="-161.60254"/>
        |      <line x1="211.60254" y1="43.30127" x2="236.60254" y2="0.0"/>
        |      <line x1="50.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="25.0" y1="-229.903811" x2="25.0" y2="-279.903811"/>
        |      <line x1="25.0" y1="-279.903811" x2="50.0" y2="-323.205081"/>
        |      <line x1="50.0" y1="-323.205081" x2="93.30127" y2="-348.205081"/>
        |      <line x1="93.30127" y1="-348.205081" x2="143.30127" y2="-348.205081"/>
        |      <line x1="143.30127" y1="-348.205081" x2="186.60254" y2="-323.205081"/>
        |      <line x1="186.60254" y1="-323.205081" x2="211.60254" y2="-279.903811"/>
        |      <line x1="211.60254" y1="-279.903811" x2="211.60254" y2="-229.903811"/>
        |      <line x1="186.60254" y1="-186.60254" x2="211.60254" y2="-229.903811"/>
        |      <line x1="0.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="236.60254" y1="-186.60254" x2="211.60254" y2="-229.903811"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="-93.30127" y1="-161.60254" x2="-136.60254" y2="-186.60254"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-161.60254" y2="-229.903811"/>
        |      <line x1="-161.60254" y1="-229.903811" x2="-161.60254" y2="-279.903811"/>
        |      <line x1="-161.60254" y1="-279.903811" x2="-136.60254" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="-323.205081" x2="-93.30127" y2="-348.205081"/>
        |      <line x1="-93.30127" y1="-348.205081" x2="-43.30127" y2="-348.205081"/>
        |      <line x1="-43.30127" y1="-348.205081" x2="0.0" y2="-323.205081"/>
        |      <line x1="25.0" y1="-279.903811" x2="0.0" y2="-323.205081"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="50.0" y1="-323.205081" x2="0.0" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="0.0" x2="-186.60254" y2="0.0"/>
        |      <line x1="-186.60254" y1="0.0" x2="-229.903811" y2="-25.0"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-254.903811" y1="-68.30127" x2="-254.903811" y2="-118.30127"/>
        |      <line x1="-254.903811" y1="-118.30127" x2="-229.903811" y2="-161.60254"/>
        |      <line x1="-229.903811" y1="-161.60254" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-186.60254" y2="0.0"/>
        |      <line x1="-161.60254" y1="-229.903811" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="-68.30127" y1="204.903811" x2="-68.30127" y2="254.903811"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-43.30127" y2="298.205081"/>
        |      <line x1="-43.30127" y1="298.205081" x2="0.0" y2="323.205081"/>
        |      <line x1="0.0" y1="323.205081" x2="50.0" y2="323.205081"/>
        |      <line x1="50.0" y1="323.205081" x2="93.30127" y2="298.205081"/>
        |      <line x1="93.30127" y1="298.205081" x2="118.30127" y2="254.903811"/>
        |      <line x1="118.30127" y1="254.903811" x2="118.30127" y2="204.903811"/>
        |      <line x1="93.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="143.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-186.60254" y1="136.60254" x2="-229.903811" y2="161.60254"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-254.903811" y2="204.903811"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-254.903811" y2="254.903811"/>
        |      <line x1="-254.903811" y1="254.903811" x2="-229.903811" y2="298.205081"/>
        |      <line x1="-229.903811" y1="298.205081" x2="-186.60254" y2="323.205081"/>
        |      <line x1="-186.60254" y1="323.205081" x2="-136.60254" y2="323.205081"/>
        |      <line x1="-136.60254" y1="323.205081" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-43.30127" y1="298.205081" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-279.903811" y2="-25.0"/>
        |      <line x1="-279.903811" y1="-25.0" x2="-323.205081" y2="0.0"/>
        |      <line x1="-323.205081" y1="0.0" x2="-348.205081" y2="43.30127"/>
        |      <line x1="-348.205081" y1="43.30127" x2="-348.205081" y2="93.30127"/>
        |      <line x1="-348.205081" y1="93.30127" x2="-323.205081" y2="136.60254"/>
        |      <line x1="-323.205081" y1="136.60254" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-254.903811" y1="-68.30127" x2="-279.903811" y2="-25.0"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-279.903811" y2="161.60254"/>
        |      <line x1="118.30127" y1="254.903811" x2="143.30127" y2="298.205081"/>
        |      <line x1="143.30127" y1="298.205081" x2="186.60254" y2="323.205081"/>
        |      <line x1="186.60254" y1="323.205081" x2="236.60254" y2="323.205081"/>
        |      <line x1="236.60254" y1="323.205081" x2="279.903811" y2="298.205081"/>
        |      <line x1="279.903811" y1="298.205081" x2="304.903811" y2="254.903811"/>
        |      <line x1="304.903811" y1="254.903811" x2="304.903811" y2="204.903811"/>
        |      <line x1="304.903811" y1="204.903811" x2="279.903811" y2="161.60254"/>
        |      <line x1="279.903811" y1="161.60254" x2="236.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="236.60254" y2="136.60254"/>
        |    </g>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Node labels</title>
        |      <desc>Each node showing its value</desc>
        |      <text x="118.30127" y="-68.30127">5</text>
        |      <text x="186.60254" y="323.205081">84</text>
        |      <text x="50.0" y="323.205081">65</text>
        |      <text x="-279.903811" y="-25.0">77</text>
        |      <text x="93.30127" y="298.205081">66</text>
        |      <text x="304.903811" y="254.903811">87</text>
        |      <text x="-186.60254" y="136.60254">69</text>
        |      <text x="304.903811" y="204.903811">88</text>
        |      <text x="-43.30127" y="-161.60254">10</text>
        |      <text x="-229.903811" y="-25.0">56</text>
        |      <text x="93.30127" y="-348.205081">42</text>
        |      <text x="93.30127" y="161.60254">24</text>
        |      <text x="279.903811" y="-25.0">37</text>
        |      <text x="143.30127" y="161.60254">25</text>
        |      <text x="-93.30127" y="-348.205081">52</text>
        |      <text x="25.0" y="93.30127">14</text>
        |      <text x="-161.60254" y="43.30127">20</text>
        |      <text x="211.60254" y="-229.903811">46</text>
        |      <text x="-254.903811" y="-68.30127">57</text>
        |      <text x="-323.205081" y="0.0">78</text>
        |      <text x="186.60254" y="0.0">29</text>
        |      <text x="-68.30127" y="204.903811">61</text>
        |      <text x="279.903811" y="161.60254">89</text>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="-186.60254" y="323.205081">74</text>
        |      <text x="118.30127" y="-118.30127">6</text>
        |      <text x="-186.60254" y="-186.60254">60</text>
        |      <text x="236.60254" y="323.205081">85</text>
        |      <text x="-229.903811" y="161.60254">70</text>
        |      <text x="-136.60254" y="0.0">21</text>
        |      <text x="236.60254" y="-186.60254">33</text>
        |      <text x="211.60254" y="43.30127">28</text>
        |      <text x="236.60254" y="0.0">38</text>
        |      <text x="0.0" y="-186.60254">9</text>
        |      <text x="-43.30127" y="-348.205081">53</text>
        |      <text x="-43.30127" y="-25.0">13</text>
        |      <text x="50.0" y="-323.205081">41</text>
        |      <text x="-229.903811" y="298.205081">73</text>
        |      <text x="50.0" y="0.0">2</text>
        |      <text x="211.60254" y="-279.903811">45</text>
        |      <text x="0.0" y="323.205081">64</text>
        |      <text x="-93.30127" y="161.60254">17</text>
        |      <text x="186.60254" y="-186.60254">32</text>
        |      <text x="279.903811" y="-161.60254">34</text>
        |      <text x="-93.30127" y="-25.0">22</text>
        |      <text x="186.60254" y="-323.205081">44</text>
        |      <text x="-229.903811" y="-161.60254">59</text>
        |      <text x="211.60254" y="93.30127">27</text>
        |      <text x="-254.903811" y="204.903811">71</text>
        |      <text x="-68.30127" y="-68.30127">12</text>
        |      <text x="0.0" y="-323.205081">54</text>
        |      <text x="-161.60254" y="-229.903811">49</text>
        |      <text x="279.903811" y="298.205081">86</text>
        |      <text x="-323.205081" y="136.60254">81</text>
        |      <text x="-93.30127" y="298.205081">76</text>
        |      <text x="93.30127" y="-161.60254">7</text>
        |      <text x="25.0" y="-229.903811">39</text>
        |      <text x="25.0" y="43.30127">3</text>
        |      <text x="-348.205081" y="93.30127">80</text>
        |      <text x="304.903811" y="-118.30127">35</text>
        |      <text x="-136.60254" y="-186.60254">48</text>
        |      <text x="-43.30127" y="298.205081">63</text>
        |      <text x="-136.60254" y="136.60254">18</text>
        |      <text x="-161.60254" y="-279.903811">50</text>
        |      <text x="118.30127" y="254.903811">67</text>
        |      <text x="-43.30127" y="161.60254">16</text>
        |      <text x="143.30127" y="-161.60254">31</text>
        |      <text x="-68.30127" y="-118.30127">11</text>
        |      <text x="-254.903811" y="254.903811">72</text>
        |      <text x="143.30127" y="-348.205081">43</text>
        |      <text x="25.0" y="-279.903811">40</text>
        |      <text x="186.60254" y="136.60254">26</text>
        |      <text x="-186.60254" y="0.0">55</text>
        |      <text x="50.0" y="136.60254">23</text>
        |      <text x="50.0" y="-186.60254">8</text>
        |      <text x="-136.60254" y="323.205081">75</text>
        |      <text x="-254.903811" y="-118.30127">58</text>
        |      <text x="-279.903811" y="161.60254">82</text>
        |      <text x="304.903811" y="-68.30127">36</text>
        |      <text x="143.30127" y="-25.0">30</text>
        |      <text x="-136.60254" y="-323.205081">51</text>
        |      <text x="-161.60254" y="93.30127">19</text>
        |      <text x="93.30127" y="-25.0">4</text>
        |      <text x="-348.205081" y="43.30127">79</text>
        |      <text x="-93.30127" y="-161.60254">47</text>
        |      <text x="0.0" y="136.60254">15</text>
        |      <text x="118.30127" y="204.903811">68</text>
        |      <text x="-68.30127" y="254.903811">62</text>
        |      <text x="236.60254" y="136.60254">90</text>
        |      <text x="143.30127" y="298.205081">83</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

  val grownEdges: List[Edge] =
    List(
      1--2, 2--3, 1--3, 3--4, 4--5, 5--6, 6--7, 7--8, 8--9, 9--10, 10--11, 11--12, 12--13, 1--13, 13--14, 14--15,
      15--16, 16--17, 17--18, 18--19, 19--20, 20--21, 21--22, 2--22, 12--14, 4--23, 23--24, 24--25, 25--26, 26--27,
      27--28, 28--29, 29--30, 22--30, 5--23, 21--30, 24--31, 31--32, 32--33, 33--34, 34--35, 35--36, 36--37, 37--38,
      6--38, 7--38, 25--31, 37--39, 39--40, 40--41, 41--42, 42--43, 43--44, 44--45, 45--46, 8--46, 9--46, 36--39,
      45--47, 47--48, 48--49, 49--50, 50--51, 51--52, 52--53, 53--54, 10--54, 11--54, 44--47, 15--55, 55--56,
      56--57, 57--58, 58--59, 59--60, 53--60, 16--55, 52--60, 56--61, 61--62, 62--63, 63--64, 64--65, 65--66,
      66--67, 67--68, 17--68, 18--68, 57--61, 67--69, 69--70, 70--71, 71--72, 72--73, 73--74, 74--75, 75--76,
      19--76, 20--76, 66--69, 75--77, 77--78, 78--79, 79--80, 80--81, 81--82, 29--82, 28--82, 74--77, 32--83,
      83--84, 84--85, 85--86, 86--87, 87--88, 88--89, 89--90, 26--90, 27--90, 33--83, 81--91, 91--92, 92--93,
      93--94, 94--95, 95--96, 89--96, 80--91, 88--96, 84--97, 97--98, 98--99, 99--100, 100--101, 101--102, 102--103,
      103--104, 34--104, 35--104, 85--97, 103--105, 105--106, 106--107, 107--108, 108--109, 109--110, 40--110,
      41--110, 102--105, 109--111, 111--112, 112--113, 113--114, 114--115, 115--116, 116--117, 117--118, 42--118,
      43--118, 108--111, 117--119, 119--120, 120--121, 121--122, 122--123, 123--124, 48--124, 49--124, 116--119,
      123--125, 125--126, 126--127, 127--128, 128--129, 129--130, 130--131, 131--132, 50--132, 51--132, 122--125,
      131--133, 133--134, 134--135, 135--136, 136--137, 137--138, 59--138, 58--138, 130--133, 137--139, 139--140,
      140--141, 141--142, 142--143, 143--144, 62--144, 63--144, 136--139
    )

  val t2: Tiling =
    Tiling.maybe(grownEdges).unsafe

  "A larger (3.12₂) pattern" can "be made of 55 polygons" in {
    t2.countPolygons shouldBe
      55
  }

  it must "have all nodes mapped with coordinates" in {
    t2.coords.keys.toList.sorted(NodeOrdering) shouldBe
      t2.graphNodes.sorted(NodeOrdering)
  }

  it can "render nested perimeters" in {
    t2.nestedPerimetersSVG shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-559.807621 -373.205081 983.012702 883.012702" xmlns="http://www.w3.org/2000/svg">
        |  <g style="stroke:purple;stroke-width:5;fill:none">
        |    <title>Nested</title>
        |    <desc>Nested perimeters</desc>
        |    <g style="fill-opacity:0.3333333333333333">
        |      <g>
        |        <polygon style="fill:red" points="-136.60254,-323.205081 -93.30127,-348.205081 -43.30127,-348.205081 0.0,-323.205081 50.0,-323.205081 93.30127,-348.205081 143.30127,-348.205081 186.60254,-323.205081 211.60254,-279.903811 211.60254,-229.903811 236.60254,-186.60254 279.903811,-161.60254 304.903811,-118.30127 304.903811,-68.30127 329.903811,-25.0 373.205081,0.0 398.205081,43.30127 398.205081,93.30127 373.205081,136.60254 329.903811,161.60254 304.903811,204.903811 304.903811,254.903811 279.903811,298.205081 236.60254,323.205081 211.60254,366.506351 211.60254,416.506351 186.60254,459.807621 143.30127,484.807621 93.30127,484.807621 50.0,459.807621 0.0,459.807621 -43.30127,484.807621 -93.30127,484.807621 -136.60254,459.807621 -186.60254,459.807621 -229.903811,484.807621 -279.903811,484.807621 -323.205081,459.807621 -348.205081,416.506351 -348.205081,366.506351 -373.205081,323.205081 -416.506351,298.205081 -441.506351,254.903811 -441.506351,204.903811 -466.506351,161.60254 -509.807621,136.60254 -534.807621,93.30127 -534.807621,43.30127 -509.807621,0.0 -466.506351,-25.0 -441.506351,-68.30127 -441.506351,-118.30127 -416.506351,-161.60254 -373.205081,-186.60254 -348.205081,-229.903811 -348.205081,-279.903811 -323.205081,-323.205081 -279.903811,-348.205081 -229.903811,-348.205081 -186.60254,-323.205081"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.3333333333333333">
        |      <g>
        |        <polygon style="fill:red" points="-43.30127,298.205081 0.0,323.205081 25.0,366.506351 50.0,323.205081 93.30127,298.205081 143.30127,298.205081 118.30127,254.903811 118.30127,204.903811 143.30127,161.60254 186.60254,136.60254 236.60254,136.60254 211.60254,93.30127 211.60254,43.30127 236.60254,0.0 186.60254,0.0 143.30127,-25.0 118.30127,-68.30127 118.30127,-118.30127 143.30127,-161.60254 93.30127,-161.60254 50.0,-186.60254 25.0,-229.903811 0.0,-186.60254 -43.30127,-161.60254 -93.30127,-161.60254 -136.60254,-186.60254 -161.60254,-229.903811 -186.60254,-186.60254 -229.903811,-161.60254 -279.903811,-161.60254 -254.903811,-118.30127 -254.903811,-68.30127 -279.903811,-25.0 -323.205081,0.0 -373.205081,0.0 -348.205081,43.30127 -348.205081,93.30127 -373.205081,136.60254 -323.205081,136.60254 -279.903811,161.60254 -254.903811,204.903811 -254.903811,254.903811 -279.903811,298.205081 -229.903811,298.205081 -186.60254,323.205081 -161.60254,366.506351 -136.60254,323.205081 -93.30127,298.205081"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.3333333333333333">
        |      <g>
        |        <polygon style="fill:red" points="0.0,136.60254 50.0,136.60254 25.0,93.30127 25.0,43.30127 50.0,0.0 0.0,0.0 -43.30127,-25.0 -68.30127,-68.30127 -93.30127,-25.0 -136.60254,0.0 -186.60254,0.0 -161.60254,43.30127 -161.60254,93.30127 -186.60254,136.60254 -136.60254,136.60254 -93.30127,161.60254 -68.30127,204.903811 -43.30127,161.60254"/>
        |      </g>
        |    </g>
        |  </g>
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="50.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="0.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="25.0" y1="43.30127" x2="25.0" y2="93.30127"/>
        |      <line x1="25.0" y1="93.30127" x2="0.0" y2="136.60254"/>
        |      <line x1="0.0" y1="136.60254" x2="-43.30127" y2="161.60254"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-93.30127" y2="161.60254"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-136.60254" y2="136.60254"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-161.60254" y2="93.30127"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-161.60254" y2="43.30127"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-136.60254" y2="0.0"/>
        |      <line x1="-136.60254" y1="0.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="-93.30127" y1="-25.0" x2="-43.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="0.0" x2="-43.30127" y2="-25.0"/>
        |      <line x1="-43.30127" y1="-25.0" x2="-68.30127" y2="-68.30127"/>
        |      <line x1="-68.30127" y1="-68.30127" x2="-68.30127" y2="-118.30127"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-43.30127" y2="-161.60254"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="0.0" y2="-186.60254"/>
        |      <line x1="0.0" y1="-186.60254" x2="50.0" y2="-186.60254"/>
        |      <line x1="50.0" y1="-186.60254" x2="93.30127" y2="-161.60254"/>
        |      <line x1="93.30127" y1="-161.60254" x2="118.30127" y2="-118.30127"/>
        |      <line x1="118.30127" y1="-118.30127" x2="118.30127" y2="-68.30127"/>
        |      <line x1="118.30127" y1="-68.30127" x2="93.30127" y2="-25.0"/>
        |      <line x1="50.0" y1="0.0" x2="93.30127" y2="-25.0"/>
        |      <line x1="-93.30127" y1="-25.0" x2="-68.30127" y2="-68.30127"/>
        |      <line x1="25.0" y1="93.30127" x2="50.0" y2="136.60254"/>
        |      <line x1="50.0" y1="136.60254" x2="93.30127" y2="161.60254"/>
        |      <line x1="93.30127" y1="161.60254" x2="143.30127" y2="161.60254"/>
        |      <line x1="143.30127" y1="161.60254" x2="186.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="211.60254" y2="93.30127"/>
        |      <line x1="211.60254" y1="93.30127" x2="211.60254" y2="43.30127"/>
        |      <line x1="211.60254" y1="43.30127" x2="186.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="136.60254" x2="50.0" y2="136.60254"/>
        |      <line x1="118.30127" y1="-68.30127" x2="143.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="118.30127" y1="204.903811" x2="118.30127" y2="254.903811"/>
        |      <line x1="118.30127" y1="254.903811" x2="93.30127" y2="298.205081"/>
        |      <line x1="93.30127" y1="298.205081" x2="50.0" y2="323.205081"/>
        |      <line x1="50.0" y1="323.205081" x2="0.0" y2="323.205081"/>
        |      <line x1="0.0" y1="323.205081" x2="-43.30127" y2="298.205081"/>
        |      <line x1="-43.30127" y1="298.205081" x2="-68.30127" y2="254.903811"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-68.30127" y2="204.903811"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="143.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-93.30127" y1="298.205081" x2="-136.60254" y2="323.205081"/>
        |      <line x1="-136.60254" y1="323.205081" x2="-186.60254" y2="323.205081"/>
        |      <line x1="-186.60254" y1="323.205081" x2="-229.903811" y2="298.205081"/>
        |      <line x1="-229.903811" y1="298.205081" x2="-254.903811" y2="254.903811"/>
        |      <line x1="-254.903811" y1="254.903811" x2="-254.903811" y2="204.903811"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-229.903811" y2="161.60254"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-43.30127" y1="298.205081" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-279.903811" y1="161.60254" x2="-323.205081" y2="136.60254"/>
        |      <line x1="-323.205081" y1="136.60254" x2="-348.205081" y2="93.30127"/>
        |      <line x1="-348.205081" y1="93.30127" x2="-348.205081" y2="43.30127"/>
        |      <line x1="-348.205081" y1="43.30127" x2="-323.205081" y2="0.0"/>
        |      <line x1="-323.205081" y1="0.0" x2="-279.903811" y2="-25.0"/>
        |      <line x1="-279.903811" y1="-25.0" x2="-229.903811" y2="-25.0"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-186.60254" y2="0.0"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-186.60254" y2="0.0"/>
        |      <line x1="-136.60254" y1="0.0" x2="-186.60254" y2="0.0"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="-93.30127" y1="-161.60254" x2="-136.60254" y2="-186.60254"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-186.60254" y1="-186.60254" x2="-229.903811" y2="-161.60254"/>
        |      <line x1="-229.903811" y1="-161.60254" x2="-254.903811" y2="-118.30127"/>
        |      <line x1="-254.903811" y1="-118.30127" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="-279.903811" y1="-25.0" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-161.60254" y2="-229.903811"/>
        |      <line x1="-161.60254" y1="-229.903811" x2="-161.60254" y2="-279.903811"/>
        |      <line x1="-161.60254" y1="-279.903811" x2="-136.60254" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="-323.205081" x2="-93.30127" y2="-348.205081"/>
        |      <line x1="-93.30127" y1="-348.205081" x2="-43.30127" y2="-348.205081"/>
        |      <line x1="-43.30127" y1="-348.205081" x2="0.0" y2="-323.205081"/>
        |      <line x1="0.0" y1="-323.205081" x2="25.0" y2="-279.903811"/>
        |      <line x1="25.0" y1="-279.903811" x2="25.0" y2="-229.903811"/>
        |      <line x1="0.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="50.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="-186.60254" y1="-186.60254" x2="-161.60254" y2="-229.903811"/>
        |      <line x1="25.0" y1="-279.903811" x2="50.0" y2="-323.205081"/>
        |      <line x1="50.0" y1="-323.205081" x2="93.30127" y2="-348.205081"/>
        |      <line x1="93.30127" y1="-348.205081" x2="143.30127" y2="-348.205081"/>
        |      <line x1="143.30127" y1="-348.205081" x2="186.60254" y2="-323.205081"/>
        |      <line x1="186.60254" y1="-323.205081" x2="211.60254" y2="-279.903811"/>
        |      <line x1="211.60254" y1="-279.903811" x2="211.60254" y2="-229.903811"/>
        |      <line x1="211.60254" y1="-229.903811" x2="186.60254" y2="-186.60254"/>
        |      <line x1="186.60254" y1="-186.60254" x2="143.30127" y2="-161.60254"/>
        |      <line x1="93.30127" y1="-161.60254" x2="143.30127" y2="-161.60254"/>
        |      <line x1="118.30127" y1="-118.30127" x2="143.30127" y2="-161.60254"/>
        |      <line x1="0.0" y1="-323.205081" x2="50.0" y2="-323.205081"/>
        |      <line x1="186.60254" y1="-186.60254" x2="236.60254" y2="-186.60254"/>
        |      <line x1="236.60254" y1="-186.60254" x2="279.903811" y2="-161.60254"/>
        |      <line x1="279.903811" y1="-161.60254" x2="304.903811" y2="-118.30127"/>
        |      <line x1="304.903811" y1="-118.30127" x2="304.903811" y2="-68.30127"/>
        |      <line x1="304.903811" y1="-68.30127" x2="279.903811" y2="-25.0"/>
        |      <line x1="279.903811" y1="-25.0" x2="236.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="236.60254" y2="0.0"/>
        |      <line x1="211.60254" y1="43.30127" x2="236.60254" y2="0.0"/>
        |      <line x1="211.60254" y1="-229.903811" x2="236.60254" y2="-186.60254"/>
        |      <line x1="118.30127" y1="254.903811" x2="143.30127" y2="298.205081"/>
        |      <line x1="143.30127" y1="298.205081" x2="186.60254" y2="323.205081"/>
        |      <line x1="186.60254" y1="323.205081" x2="236.60254" y2="323.205081"/>
        |      <line x1="236.60254" y1="323.205081" x2="279.903811" y2="298.205081"/>
        |      <line x1="279.903811" y1="298.205081" x2="304.903811" y2="254.903811"/>
        |      <line x1="304.903811" y1="254.903811" x2="304.903811" y2="204.903811"/>
        |      <line x1="304.903811" y1="204.903811" x2="279.903811" y2="161.60254"/>
        |      <line x1="279.903811" y1="161.60254" x2="236.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="236.60254" y2="136.60254"/>
        |      <line x1="211.60254" y1="93.30127" x2="236.60254" y2="136.60254"/>
        |      <line x1="93.30127" y1="298.205081" x2="143.30127" y2="298.205081"/>
        |      <line x1="279.903811" y1="-25.0" x2="329.903811" y2="-25.0"/>
        |      <line x1="329.903811" y1="-25.0" x2="373.205081" y2="0.0"/>
        |      <line x1="373.205081" y1="0.0" x2="398.205081" y2="43.30127"/>
        |      <line x1="398.205081" y1="43.30127" x2="398.205081" y2="93.30127"/>
        |      <line x1="398.205081" y1="93.30127" x2="373.205081" y2="136.60254"/>
        |      <line x1="373.205081" y1="136.60254" x2="329.903811" y2="161.60254"/>
        |      <line x1="279.903811" y1="161.60254" x2="329.903811" y2="161.60254"/>
        |      <line x1="304.903811" y1="-68.30127" x2="329.903811" y2="-25.0"/>
        |      <line x1="304.903811" y1="204.903811" x2="329.903811" y2="161.60254"/>
        |      <line x1="186.60254" y1="323.205081" x2="211.60254" y2="366.506351"/>
        |      <line x1="211.60254" y1="366.506351" x2="211.60254" y2="416.506351"/>
        |      <line x1="211.60254" y1="416.506351" x2="186.60254" y2="459.807621"/>
        |      <line x1="186.60254" y1="459.807621" x2="143.30127" y2="484.807621"/>
        |      <line x1="143.30127" y1="484.807621" x2="93.30127" y2="484.807621"/>
        |      <line x1="93.30127" y1="484.807621" x2="50.0" y2="459.807621"/>
        |      <line x1="50.0" y1="459.807621" x2="25.0" y2="416.506351"/>
        |      <line x1="25.0" y1="416.506351" x2="25.0" y2="366.506351"/>
        |      <line x1="50.0" y1="323.205081" x2="25.0" y2="366.506351"/>
        |      <line x1="0.0" y1="323.205081" x2="25.0" y2="366.506351"/>
        |      <line x1="236.60254" y1="323.205081" x2="211.60254" y2="366.506351"/>
        |      <line x1="25.0" y1="416.506351" x2="0.0" y2="459.807621"/>
        |      <line x1="0.0" y1="459.807621" x2="-43.30127" y2="484.807621"/>
        |      <line x1="-43.30127" y1="484.807621" x2="-93.30127" y2="484.807621"/>
        |      <line x1="-93.30127" y1="484.807621" x2="-136.60254" y2="459.807621"/>
        |      <line x1="-136.60254" y1="459.807621" x2="-161.60254" y2="416.506351"/>
        |      <line x1="-161.60254" y1="416.506351" x2="-161.60254" y2="366.506351"/>
        |      <line x1="-136.60254" y1="323.205081" x2="-161.60254" y2="366.506351"/>
        |      <line x1="-186.60254" y1="323.205081" x2="-161.60254" y2="366.506351"/>
        |      <line x1="50.0" y1="459.807621" x2="0.0" y2="459.807621"/>
        |      <line x1="-161.60254" y1="416.506351" x2="-186.60254" y2="459.807621"/>
        |      <line x1="-186.60254" y1="459.807621" x2="-229.903811" y2="484.807621"/>
        |      <line x1="-229.903811" y1="484.807621" x2="-279.903811" y2="484.807621"/>
        |      <line x1="-279.903811" y1="484.807621" x2="-323.205081" y2="459.807621"/>
        |      <line x1="-323.205081" y1="459.807621" x2="-348.205081" y2="416.506351"/>
        |      <line x1="-348.205081" y1="416.506351" x2="-348.205081" y2="366.506351"/>
        |      <line x1="-348.205081" y1="366.506351" x2="-323.205081" y2="323.205081"/>
        |      <line x1="-323.205081" y1="323.205081" x2="-279.903811" y2="298.205081"/>
        |      <line x1="-229.903811" y1="298.205081" x2="-279.903811" y2="298.205081"/>
        |      <line x1="-254.903811" y1="254.903811" x2="-279.903811" y2="298.205081"/>
        |      <line x1="-136.60254" y1="459.807621" x2="-186.60254" y2="459.807621"/>
        |      <line x1="-323.205081" y1="323.205081" x2="-373.205081" y2="323.205081"/>
        |      <line x1="-373.205081" y1="323.205081" x2="-416.506351" y2="298.205081"/>
        |      <line x1="-416.506351" y1="298.205081" x2="-441.506351" y2="254.903811"/>
        |      <line x1="-441.506351" y1="254.903811" x2="-441.506351" y2="204.903811"/>
        |      <line x1="-441.506351" y1="204.903811" x2="-416.506351" y2="161.60254"/>
        |      <line x1="-416.506351" y1="161.60254" x2="-373.205081" y2="136.60254"/>
        |      <line x1="-323.205081" y1="136.60254" x2="-373.205081" y2="136.60254"/>
        |      <line x1="-348.205081" y1="93.30127" x2="-373.205081" y2="136.60254"/>
        |      <line x1="-348.205081" y1="366.506351" x2="-373.205081" y2="323.205081"/>
        |      <line x1="-416.506351" y1="161.60254" x2="-466.506351" y2="161.60254"/>
        |      <line x1="-466.506351" y1="161.60254" x2="-509.807621" y2="136.60254"/>
        |      <line x1="-509.807621" y1="136.60254" x2="-534.807621" y2="93.30127"/>
        |      <line x1="-534.807621" y1="93.30127" x2="-534.807621" y2="43.30127"/>
        |      <line x1="-534.807621" y1="43.30127" x2="-509.807621" y2="0.0"/>
        |      <line x1="-509.807621" y1="0.0" x2="-466.506351" y2="-25.0"/>
        |      <line x1="-466.506351" y1="-25.0" x2="-416.506351" y2="-25.0"/>
        |      <line x1="-416.506351" y1="-25.0" x2="-373.205081" y2="0.0"/>
        |      <line x1="-348.205081" y1="43.30127" x2="-373.205081" y2="0.0"/>
        |      <line x1="-323.205081" y1="0.0" x2="-373.205081" y2="0.0"/>
        |      <line x1="-441.506351" y1="204.903811" x2="-466.506351" y2="161.60254"/>
        |      <line x1="-416.506351" y1="-25.0" x2="-441.506351" y2="-68.30127"/>
        |      <line x1="-441.506351" y1="-68.30127" x2="-441.506351" y2="-118.30127"/>
        |      <line x1="-441.506351" y1="-118.30127" x2="-416.506351" y2="-161.60254"/>
        |      <line x1="-416.506351" y1="-161.60254" x2="-373.205081" y2="-186.60254"/>
        |      <line x1="-373.205081" y1="-186.60254" x2="-323.205081" y2="-186.60254"/>
        |      <line x1="-323.205081" y1="-186.60254" x2="-279.903811" y2="-161.60254"/>
        |      <line x1="-254.903811" y1="-118.30127" x2="-279.903811" y2="-161.60254"/>
        |      <line x1="-229.903811" y1="-161.60254" x2="-279.903811" y2="-161.60254"/>
        |      <line x1="-466.506351" y1="-25.0" x2="-441.506351" y2="-68.30127"/>
        |      <line x1="-323.205081" y1="-186.60254" x2="-348.205081" y2="-229.903811"/>
        |      <line x1="-348.205081" y1="-229.903811" x2="-348.205081" y2="-279.903811"/>
        |      <line x1="-348.205081" y1="-279.903811" x2="-323.205081" y2="-323.205081"/>
        |      <line x1="-323.205081" y1="-323.205081" x2="-279.903811" y2="-348.205081"/>
        |      <line x1="-279.903811" y1="-348.205081" x2="-229.903811" y2="-348.205081"/>
        |      <line x1="-229.903811" y1="-348.205081" x2="-186.60254" y2="-323.205081"/>
        |      <line x1="-161.60254" y1="-279.903811" x2="-186.60254" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="-323.205081" x2="-186.60254" y2="-323.205081"/>
        |      <line x1="-373.205081" y1="-186.60254" x2="-348.205081" y2="-229.903811"/>
        |    </g>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Node labels</title>
        |      <desc>Each node showing its value</desc>
        |      <text x="50.0" y="-323.205081">69</text>
        |      <text x="-279.903811" y="-161.60254">138</text>
        |      <text x="93.30127" y="484.807621">101</text>
        |      <text x="304.903811" y="204.903811">88</text>
        |      <text x="-348.205081" y="416.506351">115</text>
        |      <text x="0.0" y="136.60254">5</text>
        |      <text x="-416.506351" y="298.205081">120</text>
        |      <text x="-161.60254" y="43.30127">10</text>
        |      <text x="-136.60254" y="-186.60254">56</text>
        |      <text x="-279.903811" y="-348.205081">142</text>
        |      <text x="-229.903811" y="298.205081">42</text>
        |      <text x="93.30127" y="161.60254">24</text>
        |      <text x="-68.30127" y="254.903811">37</text>
        |      <text x="143.30127" y="161.60254">25</text>
        |      <text x="-279.903811" y="-25.0">52</text>
        |      <text x="-68.30127" y="-68.30127">14</text>
        |      <text x="-161.60254" y="366.506351">110</text>
        |      <text x="-466.506351" y="161.60254">125</text>
        |      <text x="118.30127" y="-118.30127">20</text>
        |      <text x="-186.60254" y="136.60254">46</text>
        |      <text x="398.205081" y="43.30127">93</text>
        |      <text x="-186.60254" y="-186.60254">57</text>
        |      <text x="279.903811" y="-161.60254">78</text>
        |      <text x="186.60254" y="0.0">29</text>
        |      <text x="-43.30127" y="484.807621">106</text>
        |      <text x="-441.506351" y="254.903811">121</text>
        |      <text x="186.60254" y="323.205081">84</text>
        |      <text x="-161.60254" y="-229.903811">61</text>
        |      <text x="-373.205081" y="0.0">132</text>
        |      <text x="-348.205081" y="366.506351">116</text>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="211.60254" y="-229.903811">74</text>
        |      <text x="279.903811" y="161.60254">89</text>
        |      <text x="-441.506351" y="-68.30127">133</text>
        |      <text x="-43.30127" y="161.60254">6</text>
        |      <text x="236.60254" y="323.205081">85</text>
        |      <text x="50.0" y="459.807621">102</text>
        |      <text x="-254.903811" y="-68.30127">60</text>
        |      <text x="-323.205081" y="323.205081">117</text>
        |      <text x="93.30127" y="-348.205081">70</text>
        |      <text x="93.30127" y="298.205081">33</text>
        |      <text x="211.60254" y="43.30127">28</text>
        |      <text x="-68.30127" y="204.903811">38</text>
        |      <text x="118.30127" y="-68.30127">21</text>
        |      <text x="-323.205081" y="-186.60254">137</text>
        |      <text x="373.205081" y="0.0">92</text>
        |      <text x="-43.30127" y="-348.205081">65</text>
        |      <text x="211.60254" y="366.506351">97</text>
        |      <text x="-161.60254" y="93.30127">9</text>
        |      <text x="-229.903811" y="-25.0">53</text>
        |      <text x="-323.205081" y="-323.205081">141</text>
        |      <text x="-161.60254" y="416.506351">109</text>
        |      <text x="-373.205081" y="136.60254">124</text>
        |      <text x="236.60254" y="-186.60254">77</text>
        |      <text x="329.903811" y="161.60254">96</text>
        |      <text x="-43.30127" y="-25.0">13</text>
        |      <text x="-509.807621" y="0.0">129</text>
        |      <text x="-186.60254" y="323.205081">41</text>
        |      <text x="-441.506351" y="-118.30127">134</text>
        |      <text x="211.60254" y="-279.903811">73</text>
        |      <text x="-534.807621" y="43.30127">128</text>
        |      <text x="0.0" y="459.807621">105</text>
        |      <text x="50.0" y="0.0">2</text>
        |      <text x="-229.903811" y="161.60254">45</text>
        |      <text x="-93.30127" y="-348.205081">64</text>
        |      <text x="0.0" y="-186.60254">17</text>
        |      <text x="118.30127" y="254.903811">32</text>
        |      <text x="50.0" y="323.205081">34</text>
        |      <text x="93.30127" y="-25.0">22</text>
        |      <text x="-254.903811" y="204.903811">44</text>
        |      <text x="211.60254" y="93.30127">27</text>
        |      <text x="-254.903811" y="-118.30127">59</text>
        |      <text x="-279.903811" y="298.205081">118</text>
        |      <text x="143.30127" y="-348.205081">71</text>
        |      <text x="-93.30127" y="-25.0">12</text>
        |      <text x="-186.60254" y="0.0">54</text>
        |      <text x="-186.60254" y="-323.205081">144</text>
        |      <text x="-348.205081" y="93.30127">49</text>
        |      <text x="279.903811" y="298.205081">86</text>
        |      <text x="-279.903811" y="484.807621">113</text>
        |      <text x="279.903811" y="-25.0">81</text>
        |      <text x="143.30127" y="-161.60254">76</text>
        |      <text x="-93.30127" y="161.60254">7</text>
        |      <text x="-93.30127" y="298.205081">39</text>
        |      <text x="211.60254" y="416.506351">98</text>
        |      <text x="25.0" y="416.506351">103</text>
        |      <text x="-348.205081" y="-279.903811">140</text>
        |      <text x="329.903811" y="-25.0">91</text>
        |      <text x="0.0" y="-323.205081">66</text>
        |      <text x="-136.60254" y="459.807621">108</text>
        |      <text x="-466.506351" y="-25.0">130</text>
        |      <text x="-416.506351" y="-161.60254">135</text>
        |      <text x="25.0" y="43.30127">3</text>
        |      <text x="304.903811" y="-68.30127">80</text>
        |      <text x="0.0" y="323.205081">35</text>
        |      <text x="-229.903811" y="484.807621">112</text>
        |      <text x="-416.506351" y="161.60254">123</text>
        |      <text x="-323.205081" y="136.60254">48</text>
        |      <text x="-136.60254" y="-323.205081">63</text>
        |      <text x="50.0" y="-186.60254">18</text>
        |      <text x="373.205081" y="136.60254">95</text>
        |      <text x="-348.205081" y="43.30127">50</text>
        |      <text x="25.0" y="-279.903811">67</text>
        |      <text x="-43.30127" y="-161.60254">16</text>
        |      <text x="-534.807621" y="93.30127">127</text>
        |      <text x="118.30127" y="204.903811">31</text>
        |      <text x="-136.60254" y="0.0">11</text>
        |      <text x="186.60254" y="-323.205081">72</text>
        |      <text x="-229.903811" y="-348.205081">143</text>
        |      <text x="-254.903811" y="254.903811">43</text>
        |      <text x="186.60254" y="459.807621">99</text>
        |      <text x="304.903811" y="254.903811">87</text>
        |      <text x="25.0" y="366.506351">104</text>
        |      <text x="-136.60254" y="323.205081">40</text>
        |      <text x="186.60254" y="136.60254">26</text>
        |      <text x="-348.205081" y="-229.903811">139</text>
        |      <text x="50.0" y="136.60254">23</text>
        |      <text x="-93.30127" y="-161.60254">55</text>
        |      <text x="-323.205081" y="459.807621">114</text>
        |      <text x="-136.60254" y="136.60254">8</text>
        |      <text x="186.60254" y="-186.60254">75</text>
        |      <text x="236.60254" y="0.0">82</text>
        |      <text x="-373.205081" y="323.205081">119</text>
        |      <text x="-229.903811" y="-161.60254">58</text>
        |      <text x="-43.30127" y="298.205081">36</text>
        |      <text x="143.30127" y="-25.0">30</text>
        |      <text x="-323.205081" y="0.0">51</text>
        |      <text x="93.30127" y="-161.60254">19</text>
        |      <text x="-93.30127" y="484.807621">107</text>
        |      <text x="25.0" y="93.30127">4</text>
        |      <text x="304.903811" y="-118.30127">79</text>
        |      <text x="398.205081" y="93.30127">94</text>
        |      <text x="-509.807621" y="136.60254">126</text>
        |      <text x="-373.205081" y="-186.60254">136</text>
        |      <text x="-68.30127" y="-118.30127">15</text>
        |      <text x="25.0" y="-229.903811">68</text>
        |      <text x="-161.60254" y="-279.903811">62</text>
        |      <text x="-416.506351" y="-25.0">131</text>
        |      <text x="-279.903811" y="161.60254">47</text>
        |      <text x="-441.506351" y="204.903811">122</text>
        |      <text x="143.30127" y="298.205081">83</text>
        |      <text x="143.30127" y="484.807621">100</text>
        |      <text x="236.60254" y="136.60254">90</text>
        |      <text x="-186.60254" y="459.807621">111</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

  val t3: Tiling =
    Tiling.maybe(
      grownEdges ++ List(143--145, 145--146, 146--147, 147--148, 148--149, 149--150, 150--151, 151--152, 64--152)
    ).unsafe

  "An even larger (3.12₂) pattern" can "be made of 56 polygons" in {
    t3.countPolygons shouldBe
      56
  }

  it must "have all nodes mapped with coordinates" in {
    t3.coords.keys.toList.sorted(NodeOrdering) shouldBe
      t3.graphNodes.sorted(NodeOrdering)
  }

  it can "render nested perimeters" in {
    t3.nestedPerimetersSVG shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-559.807621 -534.807621 983.012702 1044.615242" xmlns="http://www.w3.org/2000/svg">
        |  <g style="stroke:purple;stroke-width:5;fill:none">
        |    <title>Nested</title>
        |    <desc>Nested perimeters</desc>
        |    <g style="fill-opacity:0.3333333333333333">
        |      <g>
        |        <polygon style="fill:red" points="-93.30127,-348.205081 -68.30127,-391.506351 -68.30127,-441.506351 -93.30127,-484.807621 -136.60254,-509.807621 -186.60254,-509.807621 -229.903811,-484.807621 -254.903811,-441.506351 -254.903811,-391.506351 -229.903811,-348.205081 -279.903811,-348.205081 -323.205081,-323.205081 -348.205081,-279.903811 -348.205081,-229.903811 -373.205081,-186.60254 -416.506351,-161.60254 -441.506351,-118.30127 -441.506351,-68.30127 -466.506351,-25.0 -509.807621,0.0 -534.807621,43.30127 -534.807621,93.30127 -509.807621,136.60254 -466.506351,161.60254 -441.506351,204.903811 -441.506351,254.903811 -416.506351,298.205081 -373.205081,323.205081 -348.205081,366.506351 -348.205081,416.506351 -323.205081,459.807621 -279.903811,484.807621 -229.903811,484.807621 -186.60254,459.807621 -136.60254,459.807621 -93.30127,484.807621 -43.30127,484.807621 0.0,459.807621 50.0,459.807621 93.30127,484.807621 143.30127,484.807621 186.60254,459.807621 211.60254,416.506351 211.60254,366.506351 236.60254,323.205081 279.903811,298.205081 304.903811,254.903811 304.903811,204.903811 329.903811,161.60254 373.205081,136.60254 398.205081,93.30127 398.205081,43.30127 373.205081,0.0 329.903811,-25.0 304.903811,-68.30127 304.903811,-118.30127 279.903811,-161.60254 236.60254,-186.60254 211.60254,-229.903811 211.60254,-279.903811 186.60254,-323.205081 143.30127,-348.205081 93.30127,-348.205081 50.0,-323.205081 0.0,-323.205081 -43.30127,-348.205081"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.3333333333333333">
        |      <g>
        |        <polygon style="fill:red" points="-161.60254,-279.903811 -186.60254,-323.205081 -136.60254,-323.205081"/>
        |        <polygon style="fill:red" points="-43.30127,298.205081 0.0,323.205081 25.0,366.506351 50.0,323.205081 93.30127,298.205081 143.30127,298.205081 118.30127,254.903811 118.30127,204.903811 143.30127,161.60254 186.60254,136.60254 236.60254,136.60254 211.60254,93.30127 211.60254,43.30127 236.60254,0.0 186.60254,0.0 143.30127,-25.0 118.30127,-68.30127 118.30127,-118.30127 143.30127,-161.60254 93.30127,-161.60254 50.0,-186.60254 25.0,-229.903811 0.0,-186.60254 -43.30127,-161.60254 -93.30127,-161.60254 -136.60254,-186.60254 -161.60254,-229.903811 -186.60254,-186.60254 -229.903811,-161.60254 -279.903811,-161.60254 -254.903811,-118.30127 -254.903811,-68.30127 -279.903811,-25.0 -323.205081,0.0 -373.205081,0.0 -348.205081,43.30127 -348.205081,93.30127 -373.205081,136.60254 -323.205081,136.60254 -279.903811,161.60254 -254.903811,204.903811 -254.903811,254.903811 -279.903811,298.205081 -229.903811,298.205081 -186.60254,323.205081 -161.60254,366.506351 -136.60254,323.205081 -93.30127,298.205081"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.3333333333333333">
        |      <g>
        |        <polygon style="fill:red" points="0.0,136.60254 50.0,136.60254 25.0,93.30127 25.0,43.30127 50.0,0.0 0.0,0.0 -43.30127,-25.0 -68.30127,-68.30127 -93.30127,-25.0 -136.60254,0.0 -186.60254,0.0 -161.60254,43.30127 -161.60254,93.30127 -186.60254,136.60254 -136.60254,136.60254 -93.30127,161.60254 -68.30127,204.903811 -43.30127,161.60254"/>
        |      </g>
        |    </g>
        |  </g>
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="50.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="0.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="25.0" y1="43.30127" x2="25.0" y2="93.30127"/>
        |      <line x1="25.0" y1="93.30127" x2="0.0" y2="136.60254"/>
        |      <line x1="0.0" y1="136.60254" x2="-43.30127" y2="161.60254"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-93.30127" y2="161.60254"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-136.60254" y2="136.60254"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-161.60254" y2="93.30127"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-161.60254" y2="43.30127"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-136.60254" y2="0.0"/>
        |      <line x1="-136.60254" y1="0.0" x2="-93.30127" y2="-25.0"/>
        |      <line x1="-93.30127" y1="-25.0" x2="-43.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="0.0" x2="-43.30127" y2="-25.0"/>
        |      <line x1="-43.30127" y1="-25.0" x2="-68.30127" y2="-68.30127"/>
        |      <line x1="-68.30127" y1="-68.30127" x2="-68.30127" y2="-118.30127"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-43.30127" y2="-161.60254"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="0.0" y2="-186.60254"/>
        |      <line x1="0.0" y1="-186.60254" x2="50.0" y2="-186.60254"/>
        |      <line x1="50.0" y1="-186.60254" x2="93.30127" y2="-161.60254"/>
        |      <line x1="93.30127" y1="-161.60254" x2="118.30127" y2="-118.30127"/>
        |      <line x1="118.30127" y1="-118.30127" x2="118.30127" y2="-68.30127"/>
        |      <line x1="118.30127" y1="-68.30127" x2="93.30127" y2="-25.0"/>
        |      <line x1="50.0" y1="0.0" x2="93.30127" y2="-25.0"/>
        |      <line x1="-93.30127" y1="-25.0" x2="-68.30127" y2="-68.30127"/>
        |      <line x1="25.0" y1="93.30127" x2="50.0" y2="136.60254"/>
        |      <line x1="50.0" y1="136.60254" x2="93.30127" y2="161.60254"/>
        |      <line x1="93.30127" y1="161.60254" x2="143.30127" y2="161.60254"/>
        |      <line x1="143.30127" y1="161.60254" x2="186.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="211.60254" y2="93.30127"/>
        |      <line x1="211.60254" y1="93.30127" x2="211.60254" y2="43.30127"/>
        |      <line x1="211.60254" y1="43.30127" x2="186.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="-25.0" x2="143.30127" y2="-25.0"/>
        |      <line x1="0.0" y1="136.60254" x2="50.0" y2="136.60254"/>
        |      <line x1="118.30127" y1="-68.30127" x2="143.30127" y2="-25.0"/>
        |      <line x1="93.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="118.30127" y1="204.903811" x2="118.30127" y2="254.903811"/>
        |      <line x1="118.30127" y1="254.903811" x2="93.30127" y2="298.205081"/>
        |      <line x1="93.30127" y1="298.205081" x2="50.0" y2="323.205081"/>
        |      <line x1="50.0" y1="323.205081" x2="0.0" y2="323.205081"/>
        |      <line x1="0.0" y1="323.205081" x2="-43.30127" y2="298.205081"/>
        |      <line x1="-43.30127" y1="298.205081" x2="-68.30127" y2="254.903811"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-68.30127" y2="204.903811"/>
        |      <line x1="-43.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="-93.30127" y1="161.60254" x2="-68.30127" y2="204.903811"/>
        |      <line x1="143.30127" y1="161.60254" x2="118.30127" y2="204.903811"/>
        |      <line x1="-68.30127" y1="254.903811" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-93.30127" y1="298.205081" x2="-136.60254" y2="323.205081"/>
        |      <line x1="-136.60254" y1="323.205081" x2="-186.60254" y2="323.205081"/>
        |      <line x1="-186.60254" y1="323.205081" x2="-229.903811" y2="298.205081"/>
        |      <line x1="-229.903811" y1="298.205081" x2="-254.903811" y2="254.903811"/>
        |      <line x1="-254.903811" y1="254.903811" x2="-254.903811" y2="204.903811"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-229.903811" y2="161.60254"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-136.60254" y1="136.60254" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-161.60254" y1="93.30127" x2="-186.60254" y2="136.60254"/>
        |      <line x1="-43.30127" y1="298.205081" x2="-93.30127" y2="298.205081"/>
        |      <line x1="-229.903811" y1="161.60254" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-279.903811" y1="161.60254" x2="-323.205081" y2="136.60254"/>
        |      <line x1="-323.205081" y1="136.60254" x2="-348.205081" y2="93.30127"/>
        |      <line x1="-348.205081" y1="93.30127" x2="-348.205081" y2="43.30127"/>
        |      <line x1="-348.205081" y1="43.30127" x2="-323.205081" y2="0.0"/>
        |      <line x1="-323.205081" y1="0.0" x2="-279.903811" y2="-25.0"/>
        |      <line x1="-279.903811" y1="-25.0" x2="-229.903811" y2="-25.0"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-186.60254" y2="0.0"/>
        |      <line x1="-161.60254" y1="43.30127" x2="-186.60254" y2="0.0"/>
        |      <line x1="-136.60254" y1="0.0" x2="-186.60254" y2="0.0"/>
        |      <line x1="-254.903811" y1="204.903811" x2="-279.903811" y2="161.60254"/>
        |      <line x1="-68.30127" y1="-118.30127" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="-93.30127" y1="-161.60254" x2="-136.60254" y2="-186.60254"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-186.60254" y2="-186.60254"/>
        |      <line x1="-186.60254" y1="-186.60254" x2="-229.903811" y2="-161.60254"/>
        |      <line x1="-229.903811" y1="-161.60254" x2="-254.903811" y2="-118.30127"/>
        |      <line x1="-254.903811" y1="-118.30127" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-229.903811" y1="-25.0" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-43.30127" y1="-161.60254" x2="-93.30127" y2="-161.60254"/>
        |      <line x1="-279.903811" y1="-25.0" x2="-254.903811" y2="-68.30127"/>
        |      <line x1="-136.60254" y1="-186.60254" x2="-161.60254" y2="-229.903811"/>
        |      <line x1="-161.60254" y1="-229.903811" x2="-161.60254" y2="-279.903811"/>
        |      <line x1="-161.60254" y1="-279.903811" x2="-136.60254" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="-323.205081" x2="-93.30127" y2="-348.205081"/>
        |      <line x1="-93.30127" y1="-348.205081" x2="-43.30127" y2="-348.205081"/>
        |      <line x1="-43.30127" y1="-348.205081" x2="0.0" y2="-323.205081"/>
        |      <line x1="0.0" y1="-323.205081" x2="25.0" y2="-279.903811"/>
        |      <line x1="25.0" y1="-279.903811" x2="25.0" y2="-229.903811"/>
        |      <line x1="0.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="50.0" y1="-186.60254" x2="25.0" y2="-229.903811"/>
        |      <line x1="-186.60254" y1="-186.60254" x2="-161.60254" y2="-229.903811"/>
        |      <line x1="25.0" y1="-279.903811" x2="50.0" y2="-323.205081"/>
        |      <line x1="50.0" y1="-323.205081" x2="93.30127" y2="-348.205081"/>
        |      <line x1="93.30127" y1="-348.205081" x2="143.30127" y2="-348.205081"/>
        |      <line x1="143.30127" y1="-348.205081" x2="186.60254" y2="-323.205081"/>
        |      <line x1="186.60254" y1="-323.205081" x2="211.60254" y2="-279.903811"/>
        |      <line x1="211.60254" y1="-279.903811" x2="211.60254" y2="-229.903811"/>
        |      <line x1="211.60254" y1="-229.903811" x2="186.60254" y2="-186.60254"/>
        |      <line x1="186.60254" y1="-186.60254" x2="143.30127" y2="-161.60254"/>
        |      <line x1="93.30127" y1="-161.60254" x2="143.30127" y2="-161.60254"/>
        |      <line x1="118.30127" y1="-118.30127" x2="143.30127" y2="-161.60254"/>
        |      <line x1="0.0" y1="-323.205081" x2="50.0" y2="-323.205081"/>
        |      <line x1="186.60254" y1="-186.60254" x2="236.60254" y2="-186.60254"/>
        |      <line x1="236.60254" y1="-186.60254" x2="279.903811" y2="-161.60254"/>
        |      <line x1="279.903811" y1="-161.60254" x2="304.903811" y2="-118.30127"/>
        |      <line x1="304.903811" y1="-118.30127" x2="304.903811" y2="-68.30127"/>
        |      <line x1="304.903811" y1="-68.30127" x2="279.903811" y2="-25.0"/>
        |      <line x1="279.903811" y1="-25.0" x2="236.60254" y2="0.0"/>
        |      <line x1="186.60254" y1="0.0" x2="236.60254" y2="0.0"/>
        |      <line x1="211.60254" y1="43.30127" x2="236.60254" y2="0.0"/>
        |      <line x1="211.60254" y1="-229.903811" x2="236.60254" y2="-186.60254"/>
        |      <line x1="118.30127" y1="254.903811" x2="143.30127" y2="298.205081"/>
        |      <line x1="143.30127" y1="298.205081" x2="186.60254" y2="323.205081"/>
        |      <line x1="186.60254" y1="323.205081" x2="236.60254" y2="323.205081"/>
        |      <line x1="236.60254" y1="323.205081" x2="279.903811" y2="298.205081"/>
        |      <line x1="279.903811" y1="298.205081" x2="304.903811" y2="254.903811"/>
        |      <line x1="304.903811" y1="254.903811" x2="304.903811" y2="204.903811"/>
        |      <line x1="304.903811" y1="204.903811" x2="279.903811" y2="161.60254"/>
        |      <line x1="279.903811" y1="161.60254" x2="236.60254" y2="136.60254"/>
        |      <line x1="186.60254" y1="136.60254" x2="236.60254" y2="136.60254"/>
        |      <line x1="211.60254" y1="93.30127" x2="236.60254" y2="136.60254"/>
        |      <line x1="93.30127" y1="298.205081" x2="143.30127" y2="298.205081"/>
        |      <line x1="279.903811" y1="-25.0" x2="329.903811" y2="-25.0"/>
        |      <line x1="329.903811" y1="-25.0" x2="373.205081" y2="0.0"/>
        |      <line x1="373.205081" y1="0.0" x2="398.205081" y2="43.30127"/>
        |      <line x1="398.205081" y1="43.30127" x2="398.205081" y2="93.30127"/>
        |      <line x1="398.205081" y1="93.30127" x2="373.205081" y2="136.60254"/>
        |      <line x1="373.205081" y1="136.60254" x2="329.903811" y2="161.60254"/>
        |      <line x1="279.903811" y1="161.60254" x2="329.903811" y2="161.60254"/>
        |      <line x1="304.903811" y1="-68.30127" x2="329.903811" y2="-25.0"/>
        |      <line x1="304.903811" y1="204.903811" x2="329.903811" y2="161.60254"/>
        |      <line x1="186.60254" y1="323.205081" x2="211.60254" y2="366.506351"/>
        |      <line x1="211.60254" y1="366.506351" x2="211.60254" y2="416.506351"/>
        |      <line x1="211.60254" y1="416.506351" x2="186.60254" y2="459.807621"/>
        |      <line x1="186.60254" y1="459.807621" x2="143.30127" y2="484.807621"/>
        |      <line x1="143.30127" y1="484.807621" x2="93.30127" y2="484.807621"/>
        |      <line x1="93.30127" y1="484.807621" x2="50.0" y2="459.807621"/>
        |      <line x1="50.0" y1="459.807621" x2="25.0" y2="416.506351"/>
        |      <line x1="25.0" y1="416.506351" x2="25.0" y2="366.506351"/>
        |      <line x1="50.0" y1="323.205081" x2="25.0" y2="366.506351"/>
        |      <line x1="0.0" y1="323.205081" x2="25.0" y2="366.506351"/>
        |      <line x1="236.60254" y1="323.205081" x2="211.60254" y2="366.506351"/>
        |      <line x1="25.0" y1="416.506351" x2="0.0" y2="459.807621"/>
        |      <line x1="0.0" y1="459.807621" x2="-43.30127" y2="484.807621"/>
        |      <line x1="-43.30127" y1="484.807621" x2="-93.30127" y2="484.807621"/>
        |      <line x1="-93.30127" y1="484.807621" x2="-136.60254" y2="459.807621"/>
        |      <line x1="-136.60254" y1="459.807621" x2="-161.60254" y2="416.506351"/>
        |      <line x1="-161.60254" y1="416.506351" x2="-161.60254" y2="366.506351"/>
        |      <line x1="-136.60254" y1="323.205081" x2="-161.60254" y2="366.506351"/>
        |      <line x1="-186.60254" y1="323.205081" x2="-161.60254" y2="366.506351"/>
        |      <line x1="50.0" y1="459.807621" x2="0.0" y2="459.807621"/>
        |      <line x1="-161.60254" y1="416.506351" x2="-186.60254" y2="459.807621"/>
        |      <line x1="-186.60254" y1="459.807621" x2="-229.903811" y2="484.807621"/>
        |      <line x1="-229.903811" y1="484.807621" x2="-279.903811" y2="484.807621"/>
        |      <line x1="-279.903811" y1="484.807621" x2="-323.205081" y2="459.807621"/>
        |      <line x1="-323.205081" y1="459.807621" x2="-348.205081" y2="416.506351"/>
        |      <line x1="-348.205081" y1="416.506351" x2="-348.205081" y2="366.506351"/>
        |      <line x1="-348.205081" y1="366.506351" x2="-323.205081" y2="323.205081"/>
        |      <line x1="-323.205081" y1="323.205081" x2="-279.903811" y2="298.205081"/>
        |      <line x1="-229.903811" y1="298.205081" x2="-279.903811" y2="298.205081"/>
        |      <line x1="-254.903811" y1="254.903811" x2="-279.903811" y2="298.205081"/>
        |      <line x1="-136.60254" y1="459.807621" x2="-186.60254" y2="459.807621"/>
        |      <line x1="-323.205081" y1="323.205081" x2="-373.205081" y2="323.205081"/>
        |      <line x1="-373.205081" y1="323.205081" x2="-416.506351" y2="298.205081"/>
        |      <line x1="-416.506351" y1="298.205081" x2="-441.506351" y2="254.903811"/>
        |      <line x1="-441.506351" y1="254.903811" x2="-441.506351" y2="204.903811"/>
        |      <line x1="-441.506351" y1="204.903811" x2="-416.506351" y2="161.60254"/>
        |      <line x1="-416.506351" y1="161.60254" x2="-373.205081" y2="136.60254"/>
        |      <line x1="-323.205081" y1="136.60254" x2="-373.205081" y2="136.60254"/>
        |      <line x1="-348.205081" y1="93.30127" x2="-373.205081" y2="136.60254"/>
        |      <line x1="-348.205081" y1="366.506351" x2="-373.205081" y2="323.205081"/>
        |      <line x1="-416.506351" y1="161.60254" x2="-466.506351" y2="161.60254"/>
        |      <line x1="-466.506351" y1="161.60254" x2="-509.807621" y2="136.60254"/>
        |      <line x1="-509.807621" y1="136.60254" x2="-534.807621" y2="93.30127"/>
        |      <line x1="-534.807621" y1="93.30127" x2="-534.807621" y2="43.30127"/>
        |      <line x1="-534.807621" y1="43.30127" x2="-509.807621" y2="0.0"/>
        |      <line x1="-509.807621" y1="0.0" x2="-466.506351" y2="-25.0"/>
        |      <line x1="-466.506351" y1="-25.0" x2="-416.506351" y2="-25.0"/>
        |      <line x1="-416.506351" y1="-25.0" x2="-373.205081" y2="0.0"/>
        |      <line x1="-348.205081" y1="43.30127" x2="-373.205081" y2="0.0"/>
        |      <line x1="-323.205081" y1="0.0" x2="-373.205081" y2="0.0"/>
        |      <line x1="-441.506351" y1="204.903811" x2="-466.506351" y2="161.60254"/>
        |      <line x1="-416.506351" y1="-25.0" x2="-441.506351" y2="-68.30127"/>
        |      <line x1="-441.506351" y1="-68.30127" x2="-441.506351" y2="-118.30127"/>
        |      <line x1="-441.506351" y1="-118.30127" x2="-416.506351" y2="-161.60254"/>
        |      <line x1="-416.506351" y1="-161.60254" x2="-373.205081" y2="-186.60254"/>
        |      <line x1="-373.205081" y1="-186.60254" x2="-323.205081" y2="-186.60254"/>
        |      <line x1="-323.205081" y1="-186.60254" x2="-279.903811" y2="-161.60254"/>
        |      <line x1="-254.903811" y1="-118.30127" x2="-279.903811" y2="-161.60254"/>
        |      <line x1="-229.903811" y1="-161.60254" x2="-279.903811" y2="-161.60254"/>
        |      <line x1="-466.506351" y1="-25.0" x2="-441.506351" y2="-68.30127"/>
        |      <line x1="-323.205081" y1="-186.60254" x2="-348.205081" y2="-229.903811"/>
        |      <line x1="-348.205081" y1="-229.903811" x2="-348.205081" y2="-279.903811"/>
        |      <line x1="-348.205081" y1="-279.903811" x2="-323.205081" y2="-323.205081"/>
        |      <line x1="-323.205081" y1="-323.205081" x2="-279.903811" y2="-348.205081"/>
        |      <line x1="-279.903811" y1="-348.205081" x2="-229.903811" y2="-348.205081"/>
        |      <line x1="-229.903811" y1="-348.205081" x2="-186.60254" y2="-323.205081"/>
        |      <line x1="-161.60254" y1="-279.903811" x2="-186.60254" y2="-323.205081"/>
        |      <line x1="-136.60254" y1="-323.205081" x2="-186.60254" y2="-323.205081"/>
        |      <line x1="-373.205081" y1="-186.60254" x2="-348.205081" y2="-229.903811"/>
        |      <line x1="-229.903811" y1="-348.205081" x2="-254.903811" y2="-391.506351"/>
        |      <line x1="-254.903811" y1="-391.506351" x2="-254.903811" y2="-441.506351"/>
        |      <line x1="-254.903811" y1="-441.506351" x2="-229.903811" y2="-484.807621"/>
        |      <line x1="-229.903811" y1="-484.807621" x2="-186.60254" y2="-509.807621"/>
        |      <line x1="-186.60254" y1="-509.807621" x2="-136.60254" y2="-509.807621"/>
        |      <line x1="-136.60254" y1="-509.807621" x2="-93.30127" y2="-484.807621"/>
        |      <line x1="-93.30127" y1="-484.807621" x2="-68.30127" y2="-441.506351"/>
        |      <line x1="-68.30127" y1="-441.506351" x2="-68.30127" y2="-391.506351"/>
        |      <line x1="-93.30127" y1="-348.205081" x2="-68.30127" y2="-391.506351"/>
        |    </g>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Node labels</title>
        |      <desc>Each node showing its value</desc>
        |      <text x="50.0" y="-323.205081">69</text>
        |      <text x="-279.903811" y="-161.60254">138</text>
        |      <text x="93.30127" y="484.807621">101</text>
        |      <text x="304.903811" y="204.903811">88</text>
        |      <text x="-348.205081" y="416.506351">115</text>
        |      <text x="0.0" y="136.60254">5</text>
        |      <text x="-416.506351" y="298.205081">120</text>
        |      <text x="-161.60254" y="43.30127">10</text>
        |      <text x="-136.60254" y="-186.60254">56</text>
        |      <text x="-279.903811" y="-348.205081">142</text>
        |      <text x="-229.903811" y="298.205081">42</text>
        |      <text x="93.30127" y="161.60254">24</text>
        |      <text x="-68.30127" y="254.903811">37</text>
        |      <text x="143.30127" y="161.60254">25</text>
        |      <text x="-279.903811" y="-25.0">52</text>
        |      <text x="-68.30127" y="-68.30127">14</text>
        |      <text x="-161.60254" y="366.506351">110</text>
        |      <text x="-466.506351" y="161.60254">125</text>
        |      <text x="118.30127" y="-118.30127">20</text>
        |      <text x="-186.60254" y="136.60254">46</text>
        |      <text x="398.205081" y="43.30127">93</text>
        |      <text x="-68.30127" y="-391.506351">152</text>
        |      <text x="-186.60254" y="-186.60254">57</text>
        |      <text x="279.903811" y="-161.60254">78</text>
        |      <text x="186.60254" y="0.0">29</text>
        |      <text x="-43.30127" y="484.807621">106</text>
        |      <text x="-441.506351" y="254.903811">121</text>
        |      <text x="186.60254" y="323.205081">84</text>
        |      <text x="-229.903811" y="-484.807621">147</text>
        |      <text x="-161.60254" y="-229.903811">61</text>
        |      <text x="-373.205081" y="0.0">132</text>
        |      <text x="-348.205081" y="366.506351">116</text>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="211.60254" y="-229.903811">74</text>
        |      <text x="279.903811" y="161.60254">89</text>
        |      <text x="-441.506351" y="-68.30127">133</text>
        |      <text x="-43.30127" y="161.60254">6</text>
        |      <text x="236.60254" y="323.205081">85</text>
        |      <text x="50.0" y="459.807621">102</text>
        |      <text x="-254.903811" y="-68.30127">60</text>
        |      <text x="-323.205081" y="323.205081">117</text>
        |      <text x="93.30127" y="-348.205081">70</text>
        |      <text x="93.30127" y="298.205081">33</text>
        |      <text x="211.60254" y="43.30127">28</text>
        |      <text x="-68.30127" y="204.903811">38</text>
        |      <text x="118.30127" y="-68.30127">21</text>
        |      <text x="-323.205081" y="-186.60254">137</text>
        |      <text x="373.205081" y="0.0">92</text>
        |      <text x="-43.30127" y="-348.205081">65</text>
        |      <text x="211.60254" y="366.506351">97</text>
        |      <text x="-161.60254" y="93.30127">9</text>
        |      <text x="-229.903811" y="-25.0">53</text>
        |      <text x="-323.205081" y="-323.205081">141</text>
        |      <text x="-161.60254" y="416.506351">109</text>
        |      <text x="-373.205081" y="136.60254">124</text>
        |      <text x="236.60254" y="-186.60254">77</text>
        |      <text x="329.903811" y="161.60254">96</text>
        |      <text x="-43.30127" y="-25.0">13</text>
        |      <text x="-509.807621" y="0.0">129</text>
        |      <text x="-186.60254" y="323.205081">41</text>
        |      <text x="-441.506351" y="-118.30127">134</text>
        |      <text x="211.60254" y="-279.903811">73</text>
        |      <text x="-534.807621" y="43.30127">128</text>
        |      <text x="0.0" y="459.807621">105</text>
        |      <text x="50.0" y="0.0">2</text>
        |      <text x="-186.60254" y="-509.807621">148</text>
        |      <text x="-229.903811" y="161.60254">45</text>
        |      <text x="-93.30127" y="-348.205081">64</text>
        |      <text x="0.0" y="-186.60254">17</text>
        |      <text x="-136.60254" y="-509.807621">149</text>
        |      <text x="118.30127" y="254.903811">32</text>
        |      <text x="50.0" y="323.205081">34</text>
        |      <text x="93.30127" y="-25.0">22</text>
        |      <text x="-254.903811" y="204.903811">44</text>
        |      <text x="211.60254" y="93.30127">27</text>
        |      <text x="-254.903811" y="-118.30127">59</text>
        |      <text x="-279.903811" y="298.205081">118</text>
        |      <text x="143.30127" y="-348.205081">71</text>
        |      <text x="-93.30127" y="-25.0">12</text>
        |      <text x="-186.60254" y="0.0">54</text>
        |      <text x="-186.60254" y="-323.205081">144</text>
        |      <text x="-348.205081" y="93.30127">49</text>
        |      <text x="279.903811" y="298.205081">86</text>
        |      <text x="-279.903811" y="484.807621">113</text>
        |      <text x="279.903811" y="-25.0">81</text>
        |      <text x="143.30127" y="-161.60254">76</text>
        |      <text x="-93.30127" y="161.60254">7</text>
        |      <text x="-93.30127" y="298.205081">39</text>
        |      <text x="211.60254" y="416.506351">98</text>
        |      <text x="25.0" y="416.506351">103</text>
        |      <text x="-348.205081" y="-279.903811">140</text>
        |      <text x="329.903811" y="-25.0">91</text>
        |      <text x="0.0" y="-323.205081">66</text>
        |      <text x="-136.60254" y="459.807621">108</text>
        |      <text x="-466.506351" y="-25.0">130</text>
        |      <text x="-416.506351" y="-161.60254">135</text>
        |      <text x="25.0" y="43.30127">3</text>
        |      <text x="304.903811" y="-68.30127">80</text>
        |      <text x="0.0" y="323.205081">35</text>
        |      <text x="-229.903811" y="484.807621">112</text>
        |      <text x="-416.506351" y="161.60254">123</text>
        |      <text x="-254.903811" y="-391.506351">145</text>
        |      <text x="-323.205081" y="136.60254">48</text>
        |      <text x="-136.60254" y="-323.205081">63</text>
        |      <text x="50.0" y="-186.60254">18</text>
        |      <text x="-93.30127" y="-484.807621">150</text>
        |      <text x="373.205081" y="136.60254">95</text>
        |      <text x="-348.205081" y="43.30127">50</text>
        |      <text x="25.0" y="-279.903811">67</text>
        |      <text x="-43.30127" y="-161.60254">16</text>
        |      <text x="-534.807621" y="93.30127">127</text>
        |      <text x="118.30127" y="204.903811">31</text>
        |      <text x="-136.60254" y="0.0">11</text>
        |      <text x="186.60254" y="-323.205081">72</text>
        |      <text x="-229.903811" y="-348.205081">143</text>
        |      <text x="-254.903811" y="254.903811">43</text>
        |      <text x="186.60254" y="459.807621">99</text>
        |      <text x="304.903811" y="254.903811">87</text>
        |      <text x="25.0" y="366.506351">104</text>
        |      <text x="-136.60254" y="323.205081">40</text>
        |      <text x="186.60254" y="136.60254">26</text>
        |      <text x="-348.205081" y="-229.903811">139</text>
        |      <text x="50.0" y="136.60254">23</text>
        |      <text x="-93.30127" y="-161.60254">55</text>
        |      <text x="-323.205081" y="459.807621">114</text>
        |      <text x="-136.60254" y="136.60254">8</text>
        |      <text x="186.60254" y="-186.60254">75</text>
        |      <text x="236.60254" y="0.0">82</text>
        |      <text x="-373.205081" y="323.205081">119</text>
        |      <text x="-229.903811" y="-161.60254">58</text>
        |      <text x="-68.30127" y="-441.506351">151</text>
        |      <text x="-43.30127" y="298.205081">36</text>
        |      <text x="-254.903811" y="-441.506351">146</text>
        |      <text x="143.30127" y="-25.0">30</text>
        |      <text x="-323.205081" y="0.0">51</text>
        |      <text x="93.30127" y="-161.60254">19</text>
        |      <text x="-93.30127" y="484.807621">107</text>
        |      <text x="25.0" y="93.30127">4</text>
        |      <text x="304.903811" y="-118.30127">79</text>
        |      <text x="398.205081" y="93.30127">94</text>
        |      <text x="-509.807621" y="136.60254">126</text>
        |      <text x="-373.205081" y="-186.60254">136</text>
        |      <text x="-68.30127" y="-118.30127">15</text>
        |      <text x="25.0" y="-229.903811">68</text>
        |      <text x="-161.60254" y="-279.903811">62</text>
        |      <text x="-416.506351" y="-25.0">131</text>
        |      <text x="-279.903811" y="161.60254">47</text>
        |      <text x="-441.506351" y="204.903811">122</text>
        |      <text x="143.30127" y="298.205081">83</text>
        |      <text x="143.30127" y="484.807621">100</text>
        |      <text x="236.60254" y="136.60254">90</text>
        |      <text x="-186.60254" y="459.807621">111</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

  val t4: Tiling =
    Tiling.maybe(
      1 -- 2, 2 -- 3, 1 -- 3, 2 -- 4, 4 -- 5, 5 -- 6, 6 -- 7, 1 -- 7, 3 -- 8, 8 -- 9, 9 -- 10, 10 -- 11, 1 -- 11, 7 -- 11, 3 -- 12, 12 -- 13, 13 -- 14,
      14 -- 15, 2 -- 15, 4 -- 15, 8 -- 12, 15 -- 16, 16 -- 17, 17 -- 18, 18 -- 19, 4 -- 19, 5 -- 19, 14 -- 16, 19 -- 20, 20 -- 21, 21 -- 22,
      22 -- 23, 5 -- 23, 6 -- 23, 18 -- 20, 7 -- 24, 6 -- 24, 23 -- 25, 25 -- 26, 26 -- 27, 24 -- 27, 22 -- 25, 11 -- 28, 28 -- 29, 29 -- 30,
      24 -- 30, 10 -- 28, 27 -- 30, 9 -- 31, 8 -- 31, 12 -- 32, 32 -- 33, 33 -- 34, 31 -- 34, 13 -- 32, 31 -- 35, 35 -- 36, 36 -- 37, 37 -- 38,
      9 -- 38, 10 -- 38, 34 -- 35, 38 -- 39, 39 -- 40, 40 -- 41, 28 -- 41, 29 -- 41, 37 -- 39, 14 -- 42, 13 -- 42, 32 -- 43, 43 -- 44, 44 -- 45,
      42 -- 45, 33 -- 43, 16 -- 46, 46 -- 47, 47 -- 48, 42 -- 48, 17 -- 46, 45 -- 48, 46 -- 49, 49 -- 50, 50 -- 51, 51 -- 52, 17 -- 52, 18 -- 52,
      47 -- 49, 52 -- 53, 53 -- 54, 54 -- 55, 20 -- 55, 21 -- 55, 51 -- 53, 55 -- 56, 56 -- 57, 57 -- 58, 58 -- 59, 21 -- 59, 22 -- 59, 54 -- 56,
      59 -- 60, 60 -- 61, 61 -- 62, 25 -- 62, 26 -- 62, 58 -- 60, 62 -- 63, 63 -- 64, 64 -- 65, 65 -- 66, 26 -- 66, 27 -- 66, 61 -- 63, 30 -- 67,
      67 -- 68, 68 -- 69, 66 -- 69, 29 -- 67, 65 -- 69, 67 -- 70, 70 -- 71, 71 -- 72, 41 -- 72, 40 -- 72, 68 -- 70, 43 -- 73, 73 -- 74, 74 -- 75,
      75 -- 76, 33 -- 76, 34 -- 76, 44 -- 73, 76 -- 77, 77 -- 78, 78 -- 79, 35 -- 79, 36 -- 79, 75 -- 77, 79 -- 80, 80 -- 81, 81 -- 82, 82 -- 83,
      36 -- 83, 37 -- 83, 78 -- 80, 83 -- 84, 84 -- 85, 85 -- 86, 39 -- 86, 40 -- 86, 82 -- 84, 86 -- 87, 87 -- 88, 88 -- 89, 72 -- 89, 71 -- 89,
      85 -- 87, 45 -- 90, 44 -- 90, 73 -- 91, 91 -- 92, 92 -- 93, 90 -- 93, 74 -- 91
    ).unsafe

  "A (3.6.3.6) pattern" can "be made of 73 polygons" in {
    t4.countPolygons shouldBe
      73
  }

  it can "render nested perimeters" in {
    t4.nestedPerimetersSVG shouldBe
      """<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" viewBox="-300.0 -284.807621 600.0 569.615242" xmlns="http://www.w3.org/2000/svg">
        |  <g style="stroke:purple;stroke-width:5;fill:none">
        |    <title>Nested</title>
        |    <desc>Nested perimeters</desc>
        |    <g style="fill-opacity:0.2">
        |      <g>
        |        <polygon style="fill:red" points="175.0,129.903811 200.0,173.205081 225.0,216.506351 200.0,259.807621 150.0,259.807621 100.0,259.807621 50.0,259.807621 0.0,259.807621 -50.0,259.807621 -100.0,259.807621 -150.0,259.807621 -175.0,216.506351 -200.0,173.205081 -225.0,129.903811 -250.0,86.60254 -275.0,43.30127 -250.0,0.0 -225.0,-43.30127 -200.0,-86.60254 -175.0,-129.903811 -150.0,-173.205081 -125.0,-216.506351 -100.0,-259.807621 -50.0,-259.807621 0.0,-259.807621 50.0,-259.807621 100.0,-259.807621 150.0,-259.807621 175.0,-216.506351 200.0,-173.205081 225.0,-129.903811 250.0,-86.60254 275.0,-43.30127 250.0,0.0 225.0,43.30127 200.0,86.60254"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.2">
        |      <g>
        |        <polygon style="fill:red" points="0.0,-173.205081 50.0,-173.205081 75.0,-216.506351 100.0,-173.205081 150.0,-173.205081 125.0,-129.903811 150.0,-86.60254 200.0,-86.60254 175.0,-43.30127 200.0,0.0 150.0,0.0 125.0,43.30127 150.0,86.60254 175.0,129.903811 150.0,173.205081 125.0,216.506351 100.0,173.205081 50.0,173.205081 25.0,216.506351 0.0,173.205081 -50.0,173.205081 -75.0,216.506351 -100.0,173.205081 -150.0,173.205081 -125.0,129.903811 -150.0,86.60254 -200.0,86.60254 -175.0,43.30127 -200.0,0.0 -150.0,0.0 -125.0,-43.30127 -150.0,-86.60254 -100.0,-86.60254 -75.0,-129.903811 -100.0,-173.205081 -50.0,-173.205081 -25.0,-216.506351"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.2">
        |      <g>
        |        <polygon style="fill:red" points="-125.0,129.903811 -100.0,173.205081 -50.0,173.205081 -25.0,129.903811 0.0,173.205081 50.0,173.205081 75.0,129.903811 100.0,86.60254 125.0,43.30127 100.0,0.0 150.0,0.0 175.0,-43.30127 150.0,-86.60254 100.0,-86.60254 125.0,-129.903811 100.0,-173.205081 50.0,-173.205081 25.0,-129.903811 0.0,-173.205081 -50.0,-173.205081 -75.0,-129.903811 -50.0,-86.60254 -100.0,-86.60254 -125.0,-43.30127 -100.0,0.0 -150.0,0.0 -175.0,43.30127 -150.0,86.60254 -100.0,86.60254"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.2">
        |      <g>
        |        <polygon style="fill:red" points="-50.0,0.0 -25.0,-43.30127 -50.0,-86.60254 0.0,-86.60254 25.0,-129.903811 50.0,-86.60254 100.0,-86.60254 75.0,-43.30127 100.0,0.0 50.0,0.0 25.0,43.30127 50.0,86.60254 0.0,86.60254 -25.0,129.903811 -50.0,86.60254 -100.0,86.60254 -75.0,43.30127 -100.0,0.0"/>
        |      </g>
        |    </g>
        |    <g style="fill-opacity:0.2">
        |      <g>
        |        <polygon style="fill:red" points="25.0,43.30127 0.0,0.0 -50.0,0.0 -75.0,43.30127 -50.0,86.60254 0.0,86.60254"/>
        |        <polygon style="fill:red" points="50.0,-86.60254 75.0,-43.30127 50.0,0.0 0.0,0.0 -25.0,-43.30127 0.0,-86.60254"/>
        |      </g>
        |    </g>
        |  </g>
        |  <g>
        |    <title>Tiling</title>
        |    <desc>Finite tessellation of regular polygons</desc>
        |    <g style="stroke:black">
        |      <title>Edges</title>
        |      <desc>Sides of the regular polygons</desc>
        |      <line x1="0.0" y1="0.0" x2="50.0" y2="0.0"/>
        |      <line x1="50.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="0.0" y1="0.0" x2="25.0" y2="43.30127"/>
        |      <line x1="50.0" y1="0.0" x2="75.0" y2="-43.30127"/>
        |      <line x1="75.0" y1="-43.30127" x2="50.0" y2="-86.60254"/>
        |      <line x1="50.0" y1="-86.60254" x2="0.0" y2="-86.60254"/>
        |      <line x1="0.0" y1="-86.60254" x2="-25.0" y2="-43.30127"/>
        |      <line x1="0.0" y1="0.0" x2="-25.0" y2="-43.30127"/>
        |      <line x1="25.0" y1="43.30127" x2="0.0" y2="86.60254"/>
        |      <line x1="0.0" y1="86.60254" x2="-50.0" y2="86.60254"/>
        |      <line x1="-50.0" y1="86.60254" x2="-75.0" y2="43.30127"/>
        |      <line x1="-75.0" y1="43.30127" x2="-50.0" y2="0.0"/>
        |      <line x1="0.0" y1="0.0" x2="-50.0" y2="0.0"/>
        |      <line x1="-25.0" y1="-43.30127" x2="-50.0" y2="0.0"/>
        |      <line x1="25.0" y1="43.30127" x2="50.0" y2="86.60254"/>
        |      <line x1="50.0" y1="86.60254" x2="100.0" y2="86.60254"/>
        |      <line x1="100.0" y1="86.60254" x2="125.0" y2="43.30127"/>
        |      <line x1="125.0" y1="43.30127" x2="100.0" y2="0.0"/>
        |      <line x1="50.0" y1="0.0" x2="100.0" y2="0.0"/>
        |      <line x1="75.0" y1="-43.30127" x2="100.0" y2="0.0"/>
        |      <line x1="0.0" y1="86.60254" x2="50.0" y2="86.60254"/>
        |      <line x1="100.0" y1="0.0" x2="150.0" y2="0.0"/>
        |      <line x1="150.0" y1="0.0" x2="175.0" y2="-43.30127"/>
        |      <line x1="175.0" y1="-43.30127" x2="150.0" y2="-86.60254"/>
        |      <line x1="150.0" y1="-86.60254" x2="100.0" y2="-86.60254"/>
        |      <line x1="75.0" y1="-43.30127" x2="100.0" y2="-86.60254"/>
        |      <line x1="50.0" y1="-86.60254" x2="100.0" y2="-86.60254"/>
        |      <line x1="125.0" y1="43.30127" x2="150.0" y2="0.0"/>
        |      <line x1="100.0" y1="-86.60254" x2="125.0" y2="-129.903811"/>
        |      <line x1="125.0" y1="-129.903811" x2="100.0" y2="-173.205081"/>
        |      <line x1="100.0" y1="-173.205081" x2="50.0" y2="-173.205081"/>
        |      <line x1="50.0" y1="-173.205081" x2="25.0" y2="-129.903811"/>
        |      <line x1="50.0" y1="-86.60254" x2="25.0" y2="-129.903811"/>
        |      <line x1="0.0" y1="-86.60254" x2="25.0" y2="-129.903811"/>
        |      <line x1="150.0" y1="-86.60254" x2="125.0" y2="-129.903811"/>
        |      <line x1="-25.0" y1="-43.30127" x2="-50.0" y2="-86.60254"/>
        |      <line x1="0.0" y1="-86.60254" x2="-50.0" y2="-86.60254"/>
        |      <line x1="25.0" y1="-129.903811" x2="0.0" y2="-173.205081"/>
        |      <line x1="0.0" y1="-173.205081" x2="-50.0" y2="-173.205081"/>
        |      <line x1="-50.0" y1="-173.205081" x2="-75.0" y2="-129.903811"/>
        |      <line x1="-50.0" y1="-86.60254" x2="-75.0" y2="-129.903811"/>
        |      <line x1="50.0" y1="-173.205081" x2="0.0" y2="-173.205081"/>
        |      <line x1="-50.0" y1="0.0" x2="-100.0" y2="0.0"/>
        |      <line x1="-100.0" y1="0.0" x2="-125.0" y2="-43.30127"/>
        |      <line x1="-125.0" y1="-43.30127" x2="-100.0" y2="-86.60254"/>
        |      <line x1="-50.0" y1="-86.60254" x2="-100.0" y2="-86.60254"/>
        |      <line x1="-75.0" y1="43.30127" x2="-100.0" y2="0.0"/>
        |      <line x1="-75.0" y1="-129.903811" x2="-100.0" y2="-86.60254"/>
        |      <line x1="-50.0" y1="86.60254" x2="-25.0" y2="129.903811"/>
        |      <line x1="0.0" y1="86.60254" x2="-25.0" y2="129.903811"/>
        |      <line x1="50.0" y1="86.60254" x2="75.0" y2="129.903811"/>
        |      <line x1="75.0" y1="129.903811" x2="50.0" y2="173.205081"/>
        |      <line x1="50.0" y1="173.205081" x2="0.0" y2="173.205081"/>
        |      <line x1="-25.0" y1="129.903811" x2="0.0" y2="173.205081"/>
        |      <line x1="100.0" y1="86.60254" x2="75.0" y2="129.903811"/>
        |      <line x1="-25.0" y1="129.903811" x2="-50.0" y2="173.205081"/>
        |      <line x1="-50.0" y1="173.205081" x2="-100.0" y2="173.205081"/>
        |      <line x1="-100.0" y1="173.205081" x2="-125.0" y2="129.903811"/>
        |      <line x1="-125.0" y1="129.903811" x2="-100.0" y2="86.60254"/>
        |      <line x1="-50.0" y1="86.60254" x2="-100.0" y2="86.60254"/>
        |      <line x1="-75.0" y1="43.30127" x2="-100.0" y2="86.60254"/>
        |      <line x1="0.0" y1="173.205081" x2="-50.0" y2="173.205081"/>
        |      <line x1="-100.0" y1="86.60254" x2="-150.0" y2="86.60254"/>
        |      <line x1="-150.0" y1="86.60254" x2="-175.0" y2="43.30127"/>
        |      <line x1="-175.0" y1="43.30127" x2="-150.0" y2="0.0"/>
        |      <line x1="-100.0" y1="0.0" x2="-150.0" y2="0.0"/>
        |      <line x1="-125.0" y1="-43.30127" x2="-150.0" y2="0.0"/>
        |      <line x1="-125.0" y1="129.903811" x2="-150.0" y2="86.60254"/>
        |      <line x1="125.0" y1="43.30127" x2="150.0" y2="86.60254"/>
        |      <line x1="100.0" y1="86.60254" x2="150.0" y2="86.60254"/>
        |      <line x1="75.0" y1="129.903811" x2="100.0" y2="173.205081"/>
        |      <line x1="100.0" y1="173.205081" x2="150.0" y2="173.205081"/>
        |      <line x1="150.0" y1="173.205081" x2="175.0" y2="129.903811"/>
        |      <line x1="150.0" y1="86.60254" x2="175.0" y2="129.903811"/>
        |      <line x1="50.0" y1="173.205081" x2="100.0" y2="173.205081"/>
        |      <line x1="150.0" y1="0.0" x2="200.0" y2="0.0"/>
        |      <line x1="200.0" y1="0.0" x2="225.0" y2="43.30127"/>
        |      <line x1="225.0" y1="43.30127" x2="200.0" y2="86.60254"/>
        |      <line x1="150.0" y1="86.60254" x2="200.0" y2="86.60254"/>
        |      <line x1="175.0" y1="-43.30127" x2="200.0" y2="0.0"/>
        |      <line x1="175.0" y1="129.903811" x2="200.0" y2="86.60254"/>
        |      <line x1="200.0" y1="0.0" x2="250.0" y2="0.0"/>
        |      <line x1="250.0" y1="0.0" x2="275.0" y2="-43.30127"/>
        |      <line x1="275.0" y1="-43.30127" x2="250.0" y2="-86.60254"/>
        |      <line x1="250.0" y1="-86.60254" x2="200.0" y2="-86.60254"/>
        |      <line x1="175.0" y1="-43.30127" x2="200.0" y2="-86.60254"/>
        |      <line x1="150.0" y1="-86.60254" x2="200.0" y2="-86.60254"/>
        |      <line x1="225.0" y1="43.30127" x2="250.0" y2="0.0"/>
        |      <line x1="200.0" y1="-86.60254" x2="225.0" y2="-129.903811"/>
        |      <line x1="225.0" y1="-129.903811" x2="200.0" y2="-173.205081"/>
        |      <line x1="200.0" y1="-173.205081" x2="150.0" y2="-173.205081"/>
        |      <line x1="125.0" y1="-129.903811" x2="150.0" y2="-173.205081"/>
        |      <line x1="100.0" y1="-173.205081" x2="150.0" y2="-173.205081"/>
        |      <line x1="250.0" y1="-86.60254" x2="225.0" y2="-129.903811"/>
        |      <line x1="150.0" y1="-173.205081" x2="175.0" y2="-216.506351"/>
        |      <line x1="175.0" y1="-216.506351" x2="150.0" y2="-259.807621"/>
        |      <line x1="150.0" y1="-259.807621" x2="100.0" y2="-259.807621"/>
        |      <line x1="100.0" y1="-259.807621" x2="75.0" y2="-216.506351"/>
        |      <line x1="100.0" y1="-173.205081" x2="75.0" y2="-216.506351"/>
        |      <line x1="50.0" y1="-173.205081" x2="75.0" y2="-216.506351"/>
        |      <line x1="200.0" y1="-173.205081" x2="175.0" y2="-216.506351"/>
        |      <line x1="75.0" y1="-216.506351" x2="50.0" y2="-259.807621"/>
        |      <line x1="50.0" y1="-259.807621" x2="0.0" y2="-259.807621"/>
        |      <line x1="0.0" y1="-259.807621" x2="-25.0" y2="-216.506351"/>
        |      <line x1="0.0" y1="-173.205081" x2="-25.0" y2="-216.506351"/>
        |      <line x1="-50.0" y1="-173.205081" x2="-25.0" y2="-216.506351"/>
        |      <line x1="100.0" y1="-259.807621" x2="50.0" y2="-259.807621"/>
        |      <line x1="-25.0" y1="-216.506351" x2="-50.0" y2="-259.807621"/>
        |      <line x1="-50.0" y1="-259.807621" x2="-100.0" y2="-259.807621"/>
        |      <line x1="-100.0" y1="-259.807621" x2="-125.0" y2="-216.506351"/>
        |      <line x1="-125.0" y1="-216.506351" x2="-100.0" y2="-173.205081"/>
        |      <line x1="-50.0" y1="-173.205081" x2="-100.0" y2="-173.205081"/>
        |      <line x1="-75.0" y1="-129.903811" x2="-100.0" y2="-173.205081"/>
        |      <line x1="0.0" y1="-259.807621" x2="-50.0" y2="-259.807621"/>
        |      <line x1="-100.0" y1="-86.60254" x2="-150.0" y2="-86.60254"/>
        |      <line x1="-150.0" y1="-86.60254" x2="-175.0" y2="-129.903811"/>
        |      <line x1="-175.0" y1="-129.903811" x2="-150.0" y2="-173.205081"/>
        |      <line x1="-100.0" y1="-173.205081" x2="-150.0" y2="-173.205081"/>
        |      <line x1="-125.0" y1="-43.30127" x2="-150.0" y2="-86.60254"/>
        |      <line x1="-125.0" y1="-216.506351" x2="-150.0" y2="-173.205081"/>
        |      <line x1="-150.0" y1="-86.60254" x2="-200.0" y2="-86.60254"/>
        |      <line x1="-200.0" y1="-86.60254" x2="-225.0" y2="-43.30127"/>
        |      <line x1="-225.0" y1="-43.30127" x2="-200.0" y2="0.0"/>
        |      <line x1="-150.0" y1="0.0" x2="-200.0" y2="0.0"/>
        |      <line x1="-175.0" y1="43.30127" x2="-200.0" y2="0.0"/>
        |      <line x1="-175.0" y1="-129.903811" x2="-200.0" y2="-86.60254"/>
        |      <line x1="100.0" y1="173.205081" x2="125.0" y2="216.506351"/>
        |      <line x1="125.0" y1="216.506351" x2="100.0" y2="259.807621"/>
        |      <line x1="100.0" y1="259.807621" x2="50.0" y2="259.807621"/>
        |      <line x1="50.0" y1="259.807621" x2="25.0" y2="216.506351"/>
        |      <line x1="50.0" y1="173.205081" x2="25.0" y2="216.506351"/>
        |      <line x1="0.0" y1="173.205081" x2="25.0" y2="216.506351"/>
        |      <line x1="150.0" y1="173.205081" x2="125.0" y2="216.506351"/>
        |      <line x1="25.0" y1="216.506351" x2="0.0" y2="259.807621"/>
        |      <line x1="0.0" y1="259.807621" x2="-50.0" y2="259.807621"/>
        |      <line x1="-50.0" y1="259.807621" x2="-75.0" y2="216.506351"/>
        |      <line x1="-50.0" y1="173.205081" x2="-75.0" y2="216.506351"/>
        |      <line x1="-100.0" y1="173.205081" x2="-75.0" y2="216.506351"/>
        |      <line x1="50.0" y1="259.807621" x2="0.0" y2="259.807621"/>
        |      <line x1="-75.0" y1="216.506351" x2="-100.0" y2="259.807621"/>
        |      <line x1="-100.0" y1="259.807621" x2="-150.0" y2="259.807621"/>
        |      <line x1="-150.0" y1="259.807621" x2="-175.0" y2="216.506351"/>
        |      <line x1="-175.0" y1="216.506351" x2="-150.0" y2="173.205081"/>
        |      <line x1="-100.0" y1="173.205081" x2="-150.0" y2="173.205081"/>
        |      <line x1="-125.0" y1="129.903811" x2="-150.0" y2="173.205081"/>
        |      <line x1="-50.0" y1="259.807621" x2="-100.0" y2="259.807621"/>
        |      <line x1="-150.0" y1="173.205081" x2="-200.0" y2="173.205081"/>
        |      <line x1="-200.0" y1="173.205081" x2="-225.0" y2="129.903811"/>
        |      <line x1="-225.0" y1="129.903811" x2="-200.0" y2="86.60254"/>
        |      <line x1="-150.0" y1="86.60254" x2="-200.0" y2="86.60254"/>
        |      <line x1="-175.0" y1="43.30127" x2="-200.0" y2="86.60254"/>
        |      <line x1="-175.0" y1="216.506351" x2="-200.0" y2="173.205081"/>
        |      <line x1="-200.0" y1="86.60254" x2="-250.0" y2="86.60254"/>
        |      <line x1="-250.0" y1="86.60254" x2="-275.0" y2="43.30127"/>
        |      <line x1="-275.0" y1="43.30127" x2="-250.0" y2="0.0"/>
        |      <line x1="-200.0" y1="0.0" x2="-250.0" y2="0.0"/>
        |      <line x1="-225.0" y1="-43.30127" x2="-250.0" y2="0.0"/>
        |      <line x1="-225.0" y1="129.903811" x2="-250.0" y2="86.60254"/>
        |      <line x1="175.0" y1="129.903811" x2="200.0" y2="173.205081"/>
        |      <line x1="150.0" y1="173.205081" x2="200.0" y2="173.205081"/>
        |      <line x1="125.0" y1="216.506351" x2="150.0" y2="259.807621"/>
        |      <line x1="150.0" y1="259.807621" x2="200.0" y2="259.807621"/>
        |      <line x1="200.0" y1="259.807621" x2="225.0" y2="216.506351"/>
        |      <line x1="200.0" y1="173.205081" x2="225.0" y2="216.506351"/>
        |      <line x1="100.0" y1="259.807621" x2="150.0" y2="259.807621"/>
        |    </g>
        |    <g style="fill:#4a4a4a;text-anchor:middle;font-family:Arial,Helvetica,sans-serif">
        |      <title>Node labels</title>
        |      <desc>Each node showing its value</desc>
        |      <text x="50.0" y="-86.60254">5</text>
        |      <text x="-200.0" y="173.205081">84</text>
        |      <text x="0.0" y="259.807621">77</text>
        |      <text x="-250.0" y="86.60254">87</text>
        |      <text x="-150.0" y="-173.205081">69</text>
        |      <text x="-275.0" y="43.30127">88</text>
        |      <text x="-75.0" y="43.30127">10</text>
        |      <text x="175.0" y="-216.506351">56</text>
        |      <text x="150.0" y="86.60254">42</text>
        |      <text x="-50.0" y="-86.60254">24</text>
        |      <text x="-125.0" y="129.903811">37</text>
        |      <text x="0.0" y="-173.205081">25</text>
        |      <text x="200.0" y="-86.60254">52</text>
        |      <text x="125.0" y="43.30127">14</text>
        |      <text x="125.0" y="-129.903811">20</text>
        |      <text x="200.0" y="0.0">46</text>
        |      <text x="225.0" y="216.506351">93</text>
        |      <text x="150.0" y="-259.807621">57</text>
        |      <text x="-50.0" y="259.807621">78</text>
        |      <text x="-125.0" y="-43.30127">29</text>
        |      <text x="0.0" y="-259.807621">61</text>
        |      <text x="-250.0" y="0.0">89</text>
        |      <text x="0.0" y="0.0">1</text>
        |      <text x="100.0" y="259.807621">74</text>
        |      <text x="0.0" y="-86.60254">6</text>
        |      <text x="50.0" y="-259.807621">60</text>
        |      <text x="-225.0" y="129.903811">85</text>
        |      <text x="-200.0" y="-86.60254">70</text>
        |      <text x="100.0" y="-173.205081">21</text>
        |      <text x="50.0" y="173.205081">33</text>
        |      <text x="-100.0" y="0.0">28</text>
        |      <text x="-100.0" y="86.60254">38</text>
        |      <text x="200.0" y="259.807621">92</text>
        |      <text x="-125.0" y="-216.506351">65</text>
        |      <text x="-50.0" y="86.60254">9</text>
        |      <text x="225.0" y="-129.903811">53</text>
        |      <text x="100.0" y="86.60254">13</text>
        |      <text x="-150.0" y="0.0">41</text>
        |      <text x="125.0" y="216.506351">73</text>
        |      <text x="50.0" y="0.0">2</text>
        |      <text x="175.0" y="129.903811">45</text>
        |      <text x="-100.0" y="-259.807621">64</text>
        |      <text x="175.0" y="-43.30127">17</text>
        |      <text x="75.0" y="129.903811">32</text>
        |      <text x="0.0" y="173.205081">34</text>
        |      <text x="50.0" y="-173.205081">22</text>
        |      <text x="150.0" y="173.205081">44</text>
        |      <text x="75.0" y="-216.506351">59</text>
        |      <text x="-75.0" y="-129.903811">27</text>
        |      <text x="-225.0" y="-43.30127">71</text>
        |      <text x="50.0" y="86.60254">12</text>
        |      <text x="200.0" y="-173.205081">54</text>
        |      <text x="250.0" y="0.0">49</text>
        |      <text x="-200.0" y="86.60254">86</text>
        |      <text x="-150.0" y="259.807621">81</text>
        |      <text x="25.0" y="216.506351">76</text>
        |      <text x="-25.0" y="-43.30127">7</text>
        |      <text x="-150.0" y="86.60254">39</text>
        |      <text x="150.0" y="259.807621">91</text>
        |      <text x="-100.0" y="-173.205081">66</text>
        |      <text x="25.0" y="43.30127">3</text>
        |      <text x="-100.0" y="259.807621">80</text>
        |      <text x="-50.0" y="173.205081">35</text>
        |      <text x="200.0" y="86.60254">48</text>
        |      <text x="-50.0" y="-259.807621">63</text>
        |      <text x="150.0" y="-86.60254">18</text>
        |      <text x="275.0" y="-43.30127">50</text>
        |      <text x="-150.0" y="-86.60254">67</text>
        |      <text x="150.0" y="0.0">16</text>
        |      <text x="-25.0" y="129.903811">31</text>
        |      <text x="-50.0" y="0.0">11</text>
        |      <text x="-200.0" y="0.0">72</text>
        |      <text x="100.0" y="173.205081">43</text>
        |      <text x="-175.0" y="43.30127">40</text>
        |      <text x="-50.0" y="-173.205081">26</text>
        |      <text x="150.0" y="-173.205081">55</text>
        |      <text x="25.0" y="-129.903811">23</text>
        |      <text x="0.0" y="86.60254">8</text>
        |      <text x="50.0" y="259.807621">75</text>
        |      <text x="100.0" y="-259.807621">58</text>
        |      <text x="-175.0" y="216.506351">82</text>
        |      <text x="-100.0" y="173.205081">36</text>
        |      <text x="-100.0" y="-86.60254">30</text>
        |      <text x="250.0" y="-86.60254">51</text>
        |      <text x="100.0" y="-86.60254">19</text>
        |      <text x="75.0" y="-43.30127">4</text>
        |      <text x="-75.0" y="216.506351">79</text>
        |      <text x="225.0" y="43.30127">47</text>
        |      <text x="100.0" y="0.0">15</text>
        |      <text x="-175.0" y="-129.903811">68</text>
        |      <text x="-25.0" y="-216.506351">62</text>
        |      <text x="200.0" y="173.205081">90</text>
        |      <text x="-150.0" y="173.205081">83</text>
        |    </g>
        |  </g>
        |  <metadata>
        |    <rdf:RDF>
        |      <cc:Work>
        |        <dc:source rdf:resource="https://github.com/scala-tessella/tessella">Tessella</dc:source>
        |        <cc:license rdf:resource="https://www.apache.org/licenses/LICENSE-2.0"/>
        |      </cc:Work>
        |    </rdf:RDF>
        |  </metadata>
        |</svg>""".stripMargin
  }

}